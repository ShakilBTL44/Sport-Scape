<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Panel - Events Management</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="global.css" />
    <style>
      .menu-item {
        padding: 12px 20px;
        display: flex;
        align-items: center;
        color: #555;
        text-decoration: none;
        transition: all 0.2s ease;
        border-left: 3px solid transparent;
      }

      .menu-item:hover {
        background-color: rgba(67, 97, 238, 0.1);
        color: var(--primary-color);
        border-left: 3px solid var(--primary-color);
      }

      .menu-item.active {
        background-color: rgba(67, 97, 238, 0.1);
        color: var(--primary-color);
        border-left: 3px solid var(--primary-color);
        font-weight: 500;
      }

      .menu-item i {
        margin-right: 10px;
        font-size: 18px;
      }

      /* Main Content Styles */
      .main-content {
        flex: 1;
        margin-left: var(--sidebar-width);
        transition: all var(--transition-speed) ease;
        width: calc(100vw - var(--sidebar-width));
      }

      /* Content Area Styles */

      .page-title {
        font-size: 24px;
        font-weight: 600;
        color: var(--dark-color);
      }

      .btn-outline {
        background-color: transparent;
        border: 1px solid var(--primary-color);
        color: var(--primary-color);
      }

      .btn-outline:hover {
        background-color: rgba(67, 97, 238, 0.1);
      }

      /* Filter Section Styles */
      .filter-section {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        margin-bottom: 20px;
      }

      .filter-title {
        font-size: 16px;
        font-weight: 500;
        margin-bottom: 15px;
        color: var(--dark-color);
      }

      .filter-form {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 15px;
      }

      .form-group {
        margin-bottom: 0;
      }

      .form-label {
        display: block;
        margin-bottom: 5px;
        font-size: 14px;
        color: #555;
        /* margin-left: 10px; */
      }

      .form-control {
        width: 100%;
        padding: 0.7rem 1rem;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
        transition: border-color 0.2s ease;
      }

      .form-control:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      .filter-actions {
        display: flex;
        /* align-items: flex-end; */
        align-items: center;
        margin-top: 15px;
        /* gap: 10px; */
      }

      /* Table Styles */
      .table-container {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        overflow: hidden;
      }

      .table {
        width: 100%;
        border-collapse: collapse;
      }

      .table thead {
        background-color: #f8f9fa;
      }

      .table th {
        padding: 12px 15px;
        text-align: left;
        font-weight: 500;
        color: #555;
        font-size: 14px;
      }

      .table td {
        padding: 12px 15px;
        border-top: 1px solid #eee;
        font-size: 14px;
      }

      .table tr:hover {
        background-color: #f8f9fa;
      }

      .table tr:nth-child(even) {
        background-color: #fafafa;
      }

      .table tr:nth-child(even):hover {
        background-color: #f8f9fa;
      }

      .event-image {
        /* width: 50px;
        height: 50px; */
        border-radius: 10px;
        object-fit: cover;
      }
      #eventListImg {
        width: 100%;
        height: 100%;
        background-color: transparent;
      }
      #eventListImg > img {
        overflow: hidden;
        box-shadow: var(--image-shadow);
        height: 50px;
        width: 50px;
      }

      .badge {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 500;
      }

      .badge-primary {
        background-color: rgba(67, 97, 238, 0.1);
        color: var(--primary-color);
      }

      .badge-success {
        background-color: rgba(76, 201, 240, 0.1);
        color: var(--success-color);
      }

      .badge-warning {
        background-color: rgba(248, 150, 30, 0.1);
        color: var(--warning-color);
      }

      .badge-danger {
        background-color: rgba(247, 37, 133, 0.1);
        color: var(--danger-color);
      }

      .action-buttons {
        display: flex;
        gap: 8px;
        justify-content: center;
      }

      /* .action-btn {
        width: 30px;
        height: 30px;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
        background-color: transparent;
        border: 1px solid #ddd;
        color: #555;
      }

      .action-btn:hover {
        background-color: #f8f9fa;
        color: var(--primary-color);
        border-color: var(--primary-color);
      } */
      #fixturesMappingTitle {
        margin-left: 20px;
      }

      /* Modal Styles */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        overflow-y: auto;
      }
      .modal-overlay {
        align-items: center;
        justify-content: center;
        z-index: 2000;
      }

      .modal-content {
        background-color: white;
        margin: 50px auto;
        width: 90%;
        max-width: 800px;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        animation: modalFadeIn 0.3s ease;
      }

      @keyframes modalFadeIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-header {
        padding: 15px 20px;
        border-bottom: 1px solid #eee;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .modal-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--dark-color);
      }

      .modal-close {
        background: none;
        border: none;
        font-size: 20px;
        cursor: pointer;
        color: #777;
        transition: color 0.2s ease;
      }

      .modal-close:hover {
        color: var(--danger-color);
      }

      .modal-body {
        padding: 20px;
      }

      .modal-footer {
        padding: 15px 20px;
        border-top: 1px solid #eee;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
      }

      /* Form Styles */
      .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
      }

      .form-full-row {
        grid-column: 1 / -1;
      }

      .radio-group {
        display: flex;
        gap: 20px;
      }

      .radio-option {
        display: flex;
        align-items: center;
      }

      .radio-option input {
        margin-right: 8px;
      }

      /* Mapping Section Styles */
      .mapping-section {
        display: none;
        margin-top: 20px;
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .mapping-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .mapping-title {
        font-size: 16px;
        font-weight: 500;
        color: var(--dark-color);
      }

      .mapping-close {
        background: none;
        border: none;
        font-size: 16px;
        cursor: pointer;
        color: #777;
      }

      .mapping-close:hover {
        color: var(--danger-color);
      }

      .mapping-container {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 20px;
        align-items: center;
        /* width: 95%; */
        margin: auto;
      }

      .mapping-list {
        border: 1px solid #ddd;
        border-radius: 4px;
        min-height: 300px;
        max-height: 400px;
        overflow-y: auto;
      }

      .mapping-list-header {
        padding: 10px;
        background-color: #f8f9fa;
        border-bottom: 1px solid #ddd;
        font-weight: 700;
        font-size: 14px;
        text-align: center;
        background: rgb(202, 222, 145);
      }

      .mapping-list-content {
        padding: 10px;
      }

      .mapping-item {
        padding: 8px 10px;
        border: 1px solid #eee;
        border-radius: 4px;
        margin-bottom: 5px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 14px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .mapping-item:hover {
        background-color: #f8f9fa;
        border-color: #ddd;
      }

      .mapping-item.selected {
        background-color: rgba(67, 97, 238, 0.1);
        border-color: var(--primary-color);
      }

      .mapping-controls {
        display: flex;
        flex-direction: column;
        justify-content: center;
        gap: 10px;
      }

      .mapping-btn {
        width: 40px;
        height: 40px;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        background-color: var(--primary-color);
        color: white;
        border: none;
        transition: all 0.2s ease;
      }

      .mapping-btn:hover {
        background-color: var(--secondary-color);
      }

      .mapping-btn i {
        font-size: 16px;
      }

      .mapped-item-controls {
        display: flex;
        gap: 5px;
      }

      .mapped-item-btn {
        width: 25px;
        height: 25px;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        background-color: #f8f9fa;
        color: #555;
        border: 1px solid #ddd;
        transition: all 0.2s ease;
        font-size: 12px;
      }

      .mapped-item-btn:hover {
        background-color: #eee;
      }

      /* Responsive Styles */
      @media (max-width: 992px) {
        .sidebar {
          transform: translateX(-100%);
          z-index: 1000;
        }

        .sidebar.active {
          transform: translateX(0);
        }

        .main-content {
          margin-left: 0;
          width: 100vw;
        }

        .navbar-toggle {
          display: block;
        }
      }

      @media (max-width: 768px) {
        .filter-form {
          grid-template-columns: 1fr;
        }

        .mapping-container {
          grid-template-columns: 1fr;
          grid-template-rows: auto auto auto;
        }

        .mapping-controls {
          flex-direction: row;
          justify-content: center;
          grid-column: 1;
          grid-row: 2;
        }

        .event-details-container {
          background-color: #f8f9fa;
          padding: 20px;
        }

        .event-details-header {
          display: flex;
          flex-direction: column;
          margin-bottom: 30px;
          position: relative;
        }

        .event-details-header .header-content {
          text-align: center;
          padding: 20px 0;
          position: relative;
        }

        .event-badge {
          position: absolute;
          top: -15px;
          left: 50%;
          transform: translateX(-50%);
          background: linear-gradient(135deg, #4361ee, #3a0ca3);
          color: white;
          width: 60px;
          height: 60px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: bold;
          font-size: 18px;
          box-shadow: 0 4px 12px rgba(67, 97, 238, 0.3);
          z-index: 2;
        }

        .event-details-header h2 {
          font-size: 28px;
          color: var(--dark-color);
          margin: 15px 0 10px;
          font-weight: 700;
        }

        .event-meta {
          display: flex;
          justify-content: center;
          gap: 20px;
          flex-wrap: wrap;
        }

        .meta-item {
          display: flex;
          align-items: center;
          gap: 5px;
          color: #555;
          font-size: 14px;
        }

        .event-details-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 20px;
        }

        .detail-card {
          background-color: white;
          border-radius: 12px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
          overflow: hidden;
          transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .detail-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }

        .main-card {
          grid-column: 1 / -1;
        }

        .card-header {
          padding: 15px 20px;
          background: linear-gradient(135deg, #f8f9fa, #e9ecef);
          border-bottom: 1px solid #eee;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .card-header h3 {
          font-size: 18px;
          color: var(--dark-color);
          margin: 0;
          display: flex;
          align-items: center;
          gap: 10px;
        }

        .card-header h3 i {
          color: var(--primary-color);
        }

        .view-all {
          color: var(--primary-color);
          font-size: 14px;
          cursor: pointer;
          font-weight: 500;
        }

        .view-all:hover {
          text-decoration: underline;
        }

        .card-content {
          padding: 20px;
        }

        .event-image-container {
          position: relative;
          border-radius: 10px;
          overflow: hidden;
          margin-bottom: 20px;
        }

        .event-detail-image {
          width: 100%;
          height: 300px;
          object-fit: cover;
          display: block;
        }

        .image-overlay {
          position: absolute;
          bottom: 0;
          left: 0;
          right: 0;
          background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
          padding: 20px;
          display: flex;
          justify-content: center;
        }

        .event-description {
          line-height: 1.6;
          color: #555;
        }

        .event-description h4 {
          color: var(--dark-color);
          margin-top: 0;
        }

        .stats-container {
          display: flex;
          gap: 20px;
          margin-top: 20px;
        }

        .stat-item {
          text-align: center;
          padding: 15px;
          background-color: #f8f9fa;
          border-radius: 8px;
          flex: 1;
        }

        .stat-value {
          font-size: 24px;
          font-weight: 700;
          color: var(--primary-color);
        }

        .stat-label {
          font-size: 14px;
          color: #777;
        }

        .participants-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 15px;
        }

        .participant-item {
          display: flex;
          align-items: center;
          gap: 10px;
          padding: 10px;
          border-radius: 8px;
          background-color: #f8f9fa;
          transition: all 0.3s ease;
        }

        .team-logo {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          object-fit: cover;
        }

        .team-name {
          font-weight: 500;
          color: var(--dark-color);
        }

        .team-record {
          font-size: 12px;
          color: #777;
        }

        .fixtures-list {
          list-style: none;
          padding: 0;
          margin: 0;
        }

        .fixture-item {
          display: flex;
          align-items: center;
          padding: 12px 0;
          border-bottom: 1px solid #eee;
        }

        .fixture-item:last-child {
          border-bottom: none;
        }

        .fixture-status {
          width: 30px;
          height: 30px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-right: 15px;
        }

        .fixture-status.completed {
          background-color: rgba(76, 201, 240, 0.1);
          color: var(--success-color);
        }

        .fixture-status.upcoming {
          background-color: rgba(248, 150, 30, 0.1);
          color: var(--warning-color);
        }

        .fixture-details {
          flex: 1;
        }

        .fixture-name {
          font-weight: 500;
          color: var(--dark-color);
        }

        .fixture-time {
          font-size: 12px;
          color: #777;
        }

        .fixture-action {
          background: none;
          border: none;
          color: var(--primary-color);
          cursor: pointer;
        }

        .no-fixtures {
          text-align: center;
          color: #777;
          padding: 20px 0;
        }

        .venue-map {
          height: 200px;
          background-color: #f8f9fa;
          border-radius: 8px;
          margin-bottom: 15px;
          display: flex;
          align-items: center;
          justify-content: center;
          color: #777;
        }

        .map-placeholder {
          text-align: center;
        }

        .map-placeholder i {
          font-size: 40px;
          margin-bottom: 10px;
          color: var(--primary-color);
        }

        .venue-details p {
          margin: 8px 0;
          display: flex;
          align-items: center;
          gap: 8px;
          color: #555;
        }

        .venue-details i {
          color: var(--primary-color);
          width: 20px;
          text-align: center;
        }

        .info-tabs {
          border: 1px solid #eee;
          border-radius: 8px;
          overflow: hidden;
        }

        .tab-header {
          display: flex;
          /* border-bottom: 1px solid #eee; */
        }

        .tab-btn {
          flex: 1;
          padding: 12px;
          background: none;
          border: none;
          cursor: pointer;
          font-weight: 500;
          color: #777;
          transition: all 0.3s ease;
        }

        .tab-btn.active {
          color: var(--primary-color);
          background-color: rgba(67, 97, 238, 0.1);
          border-bottom: 2px solid var(--primary-color);
        }

        .tab-content {
          padding: 15px;
          display: none;
        }

        .tab-content.active {
          display: block;
        }

        .tab-content ul {
          padding-left: 20px;
          margin: 10px 0;
        }

        .tab-content li {
          margin-bottom: 8px;
        }

        .broadcast-logos {
          display: flex;
          gap: 15px;
          margin-top: 15px;
        }

        .broadcast-logo {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 10px 15px;
          background-color: #f8f9fa;
          border-radius: 6px;
        }

        .broadcast-logo i {
          color: var(--primary-color);
        }

        .sponsors-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
          gap: 15px;
          margin-top: 15px;
        }

        .sponsor-item {
          padding: 15px;
          background-color: #f8f9fa;
          border-radius: 8px;
          text-align: center;
        }

        .sponsor-item i {
          font-size: 24px;
          color: var(--primary-color);
          margin-bottom: 8px;
          display: block;
        }

        @media (max-width: 768px) {
          .event-details-grid {
            grid-template-columns: 1fr;
          }

          .event-meta {
            flex-direction: column;
            gap: 8px;
          }

          .event-detail-image {
            height: 200px;
          }

          .stats-container {
            flex-direction: column;
          }
        }
      }
      /* Add these styles to your existing CSS */

      /* Improved mapping lists for infinite scrolling */
      .mapping-list-content {
        height: 300px;
        overflow-y: auto;
        padding: 10px;
        background-color: #f8f9fa;
        border-radius: 0 0 4px 4px;
      }

      /* Better scrollbar styling */
      .mapping-list-content::-webkit-scrollbar {
        width: 8px;
      }

      .mapping-list-content::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
      }

      .mapping-list-content::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 4px;
      }

      .mapping-list-content::-webkit-scrollbar-thumb:hover {
        background: #555;
      }

      /* Loading indicator for infinite scroll */
      .loading-indicator {
        text-align: center;
        padding: 10px;
        color: #666;
        font-style: italic;
      }

      /* Enhanced mapping item styling */
      .mapping-item {
        padding: 10px;
        border: 1px solid #eee;
        border-radius: 4px;
        margin-bottom: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 14px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: white;
      }

      .mapping-item:hover {
        background-color: #f8f9fa;
        border-color: #ddd;
      }

      .mapping-item.selected {
        background-color: rgba(67, 97, 238, 0.1);
        border-color: var(--primary-color);
      }

      /* Fixture details styling */
      .fixture-details {
        font-size: 12px;
        color: #666;
        margin-top: 4px;
      }

      .fixture-details span {
        margin-right: 8px;
      }

      /* Filter section styling */
      .filter-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 15px;
      }

      /* details page */
      .event-card-container-box {
        width: calc(100vw - var(--sidebar-width) - 50px);
        height: calc(100vh - var(--navbar-height));
        overflow: hidden;
        position: relative;
      }
      .event-card-container {
        max-width: 800px;
        width: 95%;
        background: var(--light-color);
        border-radius: var(--card-border-radius);
        box-shadow: var(--box-shadow);
        overflow: hidden;
        margin: auto;
      }

      .event-image-container {
        height: 250px;
        width: 100%;
        position: relative;
        overflow: hidden;
      }

      .event-left-arrow {
        position: absolute;
        top: 10px;
        left: 10px;
        background-color: rgba(0, 0, 0, 0.5);
        width: 25px;
        height: 25px;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 50%;
        background-color: #ffffff;
        cursor: pointer;
      }

      .event-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: var(--transition);
      }

      .event-badge {
        position: absolute;
        top: 20px;
        right: 20px;
        background: var(--warning-color);
        color: white;
        padding: 6px 15px;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 600;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .event-content {
        padding: 25px;
      }

      .event-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 15px;
      }

      .event-title {
        font-size: 28px;
        color: var(--dark-color);
        margin-right: 15px;
      }

      .event-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-bottom: 20px;
      }

      .meta-item {
        display: flex;
        align-items: center;
        gap: 8px;
        background: var(--bg-secondary);
        padding: 8px 15px;
        border-radius: var(--border-radius);
      }

      .meta-icon {
        color: var(--primary-color);
      }

      .event-description {
        color: var(--text-secondary);
        line-height: 1.7;
        margin-bottom: 25px;
      }

      .event-stats {
        display: flex;
        gap: 20px;
        margin-top: 25px;
        padding-top: 20px;
        border-top: 1px solid var(--light-gray);
      }

      .stat-item {
        text-align: center;
      }

      .stat-value {
        font-size: 24px;
        font-weight: 700;
        color: var(--primary-color);
      }

      .stat-label {
        font-size: 14px;
        color: var(--gray-color);
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .yes-no-badge {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 600;
        background: var(--success-color);
        color: white;
      }

      .no-badge {
        background: var(--danger-color);
      }

      /* preview */
      #previewEventBtn {
        margin-left: 10px;
      }

      .app-container {
        /* width: 100%;
        max-width: 440px; */
        /* margin: 0 auto; */
        position: relative;
        background: rgb(255, 255, 255);
        /* min-height: 100vh; */
        padding-bottom: 70px; /* Space for footer */
        z-index: 25;
        cursor: default;
      }

      /* Header Styles */
      .header {
        background-color: var(--primary-blue);
        color: var(--white);
        padding: 15px 20px 0px 20px;
        position: sticky;
        top: 0;
        z-index: 100;
        max-width: 480px;
        width: 100%;
      }

      .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .greeting {
        font-size: 1.4rem;
        font-weight: 600;
      }

      .header-icons {
        display: flex;
        gap: 15px;
      }

      .icon {
        width: 24px;
        height: 24px;
        cursor: pointer;
        transition: transform 0.2s;
      }

      .icon:hover {
        transform: scale(1.1);
      }

      /* Search and Filter Bar */
      .search-filter-container {
        display: flex;
        gap: 10px;
        align-items: center;
        width: 100%;
        margin-bottom: 15px;
      }

      .search-bar {
        flex: 1;
        padding: 10px 15px;
        border-radius: 14px;
        border: none;
        background: #ffffff1a;
        display: flex;
        align-items: center;
      }

      .search-bar input {
        flex: 1;
        border: none;
        background: transparent;
        padding: 0 10px;
        font-size: 1rem;
        outline: none;
      }
      .search-bar input::placeholder {
        color: #fafafa;
      }

      .search-icon,
      .filter-icon {
        width: 18px;
        height: 18px;
        opacity: 0.7;
      }

      .filter-btn {
        background: #ffffff1a;
        border: none;
        cursor: pointer;
        padding: 8px;
        height: 40px;
        width: 40px;
        border-radius: 100%;
      }
      .filter-btn > img {
        margin-top: 3px;
      }

      /* Top Navigation */
      .top-nav {
        display: flex;
        justify-content: space-around;
        align-items: flex-end;
      }
      .top-nav > a:nth-child(1) {
        border-bottom: 2px solid white;
      }

      .nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        color: var(--text-light);
        text-decoration: none;
        font-size: 0.8rem;
        padding: 0 5px;
        position: relative;
      }

      .nav-item.active {
        color: var(--primary-blue);
      }

      .nav-item.active::after {
        content: "";
        position: absolute;
        bottom: -11px;
        left: 0;
        right: 0;
        height: 2px;
        background-color: var(--primary-blue);
      }

      .nav-icon {
        width: 20px;
        height: 20px;
        margin-bottom: 4px;
      }

      /* Preview Main Content */
      .preview-main-content {
        padding: 20px;
      }

      .section-title {
        font-size: 1.3rem;
        margin-bottom: 15px;
        color: var(--primary-blue);
        font-weight: 600;
      }

      /* Event Cards */
      .preview-events-container {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .preview-event-card {
        width: 100%;
        height: 335px;
        border-radius: 16px;
        position: relative;
        background: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.7));
        background-size: cover;
        background-position: center;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        overflow: visible;
        cursor: pointer;
      }
      .preview-event-card:hover {
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        transform: translateY(-1px);
      }

      .preview-event-badge {
        position: absolute;
        top: 16px;
        left: 16px;
        background-color: var(--orange-accent);
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 14px;
      }

      .preview-event-content {
        position: absolute;
        bottom: 16px;
        left: 16px;
        background-color: white;
        padding: 16px;
        border-radius: 16px;
        width: calc(100% - 32px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      .preview-event-title {
        font-size: 17px;
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: 4px;
      }

      .preview-event-subtitle {
        font-size: 13px;
        color: var(--text-light);
        margin-bottom: 2px;
      }

      .preview-event-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 8px;
      }

      .preview-event-date {
        font-size: 13px;
        color: var(--text-light);
      }

      .preview-event-distance {
        font-size: 13px;
        color: var(--text-light);
      }

      /* Footer Navigation */
      .footer-nav {
        position: fixed;
        bottom: 0;
        /* left: 0;
        right: 0; */
        margin: auto;
        background-color: var(--white);
        display: flex;
        justify-content: space-around;
        padding: 12px 0;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        z-index: 100;
        max-width: 480px;
        width: 100%;
        margin: 0 auto;
      }

      .footer-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        color: var(--text-light);
        text-decoration: none;
        font-size: 0.75rem;
      }

      .footer-item.active {
        color: var(--primary-blue);
      }

      .footer-icon {
        width: 22px;
        height: 22px;
        margin-bottom: 4px;
      }

      .footer-item.active .footer-icon {
        filter: brightness(0) saturate(100%) invert(22%) sepia(60%)
          saturate(1692%) hue-rotate(204deg) brightness(93%) contrast(91%);
      }

      /* event details preview */
      #showPreviewEventDetails {
        width: 100vw;
        height: 100vh;
        /* border: 2px solid red; */
        background-color: black;
        overflow-y: scroll;
        /* display: none; */
        cursor: pointer;
        display: none;
        /* max-width: 440px; */
      }
      /* Hero Section */
      .sporting-event__hero {
        position: relative;
        width: 100%;
        height: 326px;
        background: linear-gradient(
          180deg,
          rgba(0, 0, 0, 0.4) 0%,
          rgba(0, 0, 0, 0.7) 100%
        );
      }

      .sporting-event__hero-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .sporting-event__hero-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        padding: 20px;
        background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
        color: var(--white);
      }

      .sporting-event__badge {
        background-color: #ef3340;
        color: var(--white);
        padding: 5px 10px;
        border-radius: 40px;
        font-weight: bold;
        font-size: 13px;
        text-transform: uppercase;
        width: fit-content;
        margin-bottom: 10px;
      }

      .sporting-event__hero-title {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: 6px;
      }

      .sporting-event__hero-date {
        font-size: 15px;
        opacity: 0.9;
        margin-bottom: 5px;
        color: #fafafa;
      }

      .sporting-event__hero-venue {
        font-size: 14px;
        opacity: 0.8;
        color: #fafafa;
      }

      /* Event Info Card */
      .sporting-event__details-card {
        /* background-color: var(--white); */
        border-radius: var(--border-radius);
        margin: 10px 15px;
        padding: 0px;
      }

      .sporting-event__details-title {
        font-size: 20px;
        font-weight: 700;
        color: #1a243d;
        margin-bottom: 12px;
      }

      .sporting-event__details-description {
        font-size: 17px;
        line-height: 22px;
        color: var(--text-gray);
        margin-bottom: 15px;
        display: -webkit-box;
        /* -webkit-line-clamp: 3; */
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      .sporting-event__read-more {
        color: var(--accent-orange);
        font-weight: 600;
        text-decoration: none;
        display: inline-block;
        padding: 5px 0;
      }

      .sporting-event__read-more:hover {
        text-decoration: underline;
      }

      /* Info Cards */
      .sporting-event__cards-container {
        /* padding: 0 15px 20px; */
      }

      .sporting-event__card {
        position: relative;
        width: 95%;
        height: 335px;
        border-radius: var(--border-radius);
        overflow: visible;
        margin: auto;
        margin-bottom: 20px;
        background: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.7));
        box-shadow: var(--shadow);
      }

      .sporting-event__card-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: var(--border-radius);
      }

      .sporting-event__card-badge {
        position: absolute;
        top: 16px;
        left: 16px;
        background-color: var(--accent-orange);
        color: var(--white);
        padding: 4px 12px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 14px;
      }

      .sporting-event__card-content {
        position: absolute;
        bottom: 16px;
        left: 16px;
        background-color: var(--white);
        padding: 16px;
        border-radius: var(--border-radius);
        width: calc(100% - 32px);
        box-shadow: var(--shadow);
      }

      .sporting-event__card-name {
        font-size: 17px;
        font-weight: 700;
        color: #263238;
        margin-bottom: 4px;
      }

      .sporting-event__card-subtitle {
        font-size: 13px;
        color: var(--text-gray);
        margin-bottom: 2px;
      }

      .sporting-event__card-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 8px;
      }

      .sporting-event__card-date {
        font-size: 13px;
        color: var(--text-gray);
      }

      .sporting-event__card-distance {
        font-size: 13px;
        color: var(--text-gray);
      }

      table {
        width: 100%;
        border-collapse: collapse;
        table-layout: fixed;
      }

      thead {
        background-color: #f8f9fa;
        position: sticky;
        top: 0;
      }

      th {
        padding: 1rem;
        text-align: center;
        font-weight: 600;
        color: var(--dark-color);
        text-transform: uppercase;
        font-size: 0.8rem;
        letter-spacing: 0.5px;
        border-bottom: 2px solid #e9ecef;
        vertical-align: middle;
      }

      td {
        padding: 1rem;
        border-top: 1px solid #eee;
        color: #555;
        font-size: 0.9rem;
        text-align: center;
        vertical-align: middle;
        word-wrap: break-word;
      }

      /* Add these styles to your existing CSS */
      .table th,
      .table td {
        text-align: center;
        vertical-align: middle;
        width: 20%; /* Equal width for all columns */
      }

      .table th:first-child,
      .table td:first-child {
        width: 10%; /* Smaller width for image column */
      }

      .table th:last-child,
      .table td:last-child {
        width: 15%; /* Slightly smaller for actions column */
      }

      /* Style for delete button */
      .btn-danger {
        background-color: var(--danger-color);
        color: white;
        border: none;
      }

      .btn-danger:hover {
        background-color: #d63031;
      }

      /* Disabled delete button style */
      #confirmDeleteBtn:disabled {
        background-color: #ccc;
        cursor: not-allowed;
      }
      /* Responsive Adjustments */
      @media (min-width: 768px) {
      }

      .sporting-event__hero {
        height: 400px;
      }

      .sporting-event__hero-title {
        font-size: 32px;
      }

      .sporting-event__cards-container {
        display: grid;
        grid-template-columns: repeat(1, 1fr);
        gap: 20px;
        max-width: 1000px;
        margin: 0 auto;
        /* padding: 0 20px 30px; */
      }

      .sporting-event__card {
        width: calc((440px - 20px - 20px));
        height: calc((420px - 20px - 20px - 30px));
        margin-bottom: 0;
      }

      /* Delete Confirmation Modal Styles */
      .warning-text {
        line-height: 1.6;
        margin: 15px 0;
      }

      .confirmation-icon {
        text-align: center;
        margin-bottom: 20px;
      }

      .confirmation-icon i {
        font-size: 48px;
        color: var(--warning-color);
      }

      .confirmation-text {
        text-align: center;
      }

      .confirmation-text h4 {
        margin-bottom: 10px;
        color: var(--dark-color);
      }

      .confirmation-text p {
        margin-bottom: 15px;
        color: #555;
      }

      #confirmDeleteInput {
        text-align: left;
      }

      .error-message {
        display: none;
        color: var(--danger-color);
        margin-top: 5px;
        font-size: 13px;
      }
      .confirmation-modal .modal-content {
        max-width: 500px;
      }

      .confirmation-icon {
        text-align: center;
        margin-bottom: 1.5rem;
      }

      .confirmation-icon i {
        font-size: 3rem;
        color: var(--warning-color);
      }

      .confirmation-text {
        text-align: center;
        margin-bottom: 1.5rem;
      }

      .confirmation-text h4 {
        font-size: 1.3rem;
        margin-bottom: 0.8rem;
        color: var(--dark-color);
      }

      .confirmation-text p {
        color: #6c757d;
        font-size: 0.9rem;
        margin-bottom: 1rem;
      }

      .btn-danger {
        background-color: var(--danger-color);
        color: white;
        transition: all 0.2s ease;
      }

      .btn-danger:hover {
        background-color: #c82333;
      }

      .btn-danger:disabled {
        background-color: #dc3545;
        opacity: 0.5;
        cursor: not-allowed;
      }
      /* Modal Form Enhancements */
      .modal-content {
        max-width: 900px;
      }

      .form-section {
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid #eee;
      }

      .form-section:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
      }

      .section-title {
        font-size: 16px;
        font-weight: 600;
        color: #4361ee;
        margin-bottom: 15px;
        padding-bottom: 8px;
        border-bottom: 1px solid #f0f0f0;
      }

      .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 15px;
      }

      .form-group {
        margin-bottom: 15px;
      }

      .form-label {
        display: block;
        margin-bottom: 8px;
        font-size: 14px;
        font-weight: 500;
        color: #555;
      }

      .form-control {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 14px;
        transition: all 0.2s ease;
      }

      .form-control:focus {
        border-color: #4361ee;
        box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
      }

      .radio-group {
        display: flex;
        gap: 15px;
        margin-top: 8px;
      }

      .radio-option {
        display: flex;
        align-items: center;
      }

      .radio-option input {
        margin-right: 8px;
      }

      textarea.form-control {
        min-height: 100px;
        resize: vertical;
      }

      .align-self-end {
        align-self: flex-end;
      }

      /* Mapping Section Enhancements */
      .mapping-container {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 15px;
        align-items: center;
      }

      .mapping-list {
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        overflow: hidden;
      }

      .mapping-list-header {
        padding: 12px;
        background-color: #f8f9fa;
        border-bottom: 1px solid #e0e0e0;
        font-weight: 600;
        text-align: center;
        color: #333;
      }

      .mapping-list-content {
        height: 300px;
        overflow-y: auto;
        padding: 10px;
        background-color: #fff;
      }

      .mapping-controls {
        display: flex;
        flex-direction: column;
        justify-content: center;
        gap: 10px;
        padding: 20px 0;
      }

      .mapping-btn {
        width: 40px;
        height: 40px;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        background-color: #4361ee;
        color: white;
        border: none;
        transition: all 0.2s ease;
      }

      .mapping-btn:hover {
        background-color: #3a0ca3;
      }

      .mapping-btn:disabled {
        background-color: #ccc;
        cursor: not-allowed;
      }

      .mapping-item {
        padding: 10px;
        margin-bottom: 8px;
        border-radius: 6px;
        background-color: #f8f9fa;
        border: 1px solid #e0e0e0;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .mapping-item:hover {
        background-color: #e9ecef;
      }

      .mapping-item.selected {
        background-color: rgba(67, 97, 238, 0.1);
        border-color: #4361ee;
      }

      /* Modal Footer */
      .modal-footer {
        padding: 15px 20px;
        border-top: 1px solid #eee;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
      }

      .btn {
        padding: 10px 20px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .btn-outline {
        background-color: transparent;
        border: 1px solid #4361ee;
        color: #4361ee;
      }

      .btn-outline:hover {
        background-color: rgba(67, 97, 238, 0.1);
      }

      .btn-primary {
        background-color: #4361ee;
        color: white;
        border: none;
      }

      .btn-primary:hover {
        background-color: #3a0ca3;
      }
      /* Add to your existing CSS */
      .required-indicator {
        color: #e63946;
        margin-left: 4px;
      }

      .error-message {
        color: #e63946;
        font-size: 13px;
        margin-top: 5px;
        display: none;
      }

      /* Make the save button more prominent when enabled */
      #saveEventBtn:not(:disabled) {
        background-color: #4361ee;
        box-shadow: 0 2px 5px rgba(67, 97, 238, 0.3);
      }

      #saveEventBtn:not(:disabled):hover {
        background-color: #3a0ca3;
      }

      .disableBtn {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* Responsive Adjustments */
      @media (max-width: 768px) {
        .mapping-container {
          grid-template-columns: 1fr;
          grid-template-rows: auto auto auto;
        }

        .mapping-controls {
          flex-direction: row;
          justify-content: center;
          padding: 10px 0;
        }

        .form-row {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Sidebar -->
      <aside class="sidebar"></aside>

      <!-- Main Content -->
      <div class="main-content">
        <!-- Navbar -->
        <nav class="navbar"></nav>

        <!-- Content Wrapper -->
        <div class="content-wrapper">
          <!-- Page Header -->
          <div class="page-header">
            <button class="btn btn-primary" id="addEventBtn">
              <i class="fas fa-plus"></i> Add Event
            </button>
            <button class="btn btn-primary" id="previewEventBtn">
              <i class="fa fa-eye" aria-hidden="true"></i> Preview
            </button>
          </div>

          <!-- Filter Section -->
          <div class="filter-section">
            <h3 class="filter-title">Filters</h3>
            <div class="filter-form">
              <div class="form-group">
                <label class="form-label">Select Sport</label>
                <select class="form-control" id="sportFilter">
                  <option value="">All Sports</option>
                  <option value="football">Football</option>
                  <option value="basketball">Basketball</option>
                  <option value="tennis">Tennis</option>
                  <option value="cricket">Cricket</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Start Date</label>
                <input
                  type="date"
                  class="form-control"
                  id="startDateFilter"
                  placeholder="DD/MM/YYYY"
                />
              </div>
              <div class="form-group">
                <label class="form-label">End Date</label>
                <input
                  type="date"
                  class="form-control"
                  id="endDateFilter"
                  placeholder="DD/MM/YYYY"
                />
              </div>

              <div class="filter-actions">
                <button class="btn btn-primary" id="applyFiltersBtn">
                  <i class="fas fa-filter"></i> Apply
                </button>
                <button class="btn btn-outline hide" id="mapEventsBtn">
                  <i class="fas fa-map-marked-alt"></i> Map Events
                </button>
              </div>
            </div>
          </div>

          <!-- Mapping Section (Hidden by default) -->
          <div class="mapping-section" id="mappingSection">
            <div class="mapping-header">
              <h3 class="mapping-title">Event Mapping</h3>
              <button class="mapping-close" id="closeMappingBtn">
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div class="mapping-container">
              <div class="mapping-list">
                <div class="mapping-list-header">Pending Events</div>
                <div class="mapping-list-content" id="pendingEventsList">
                  <!-- Pending events will be added here by JavaScript -->
                </div>
              </div>
              <div class="mapping-controls">
                <button
                  class="mapping-btn"
                  id="moveAllRightBtn"
                  title="Move All"
                >
                  <i class="fas fa-angle-double-right"></i>
                </button>
                <button
                  class="mapping-btn"
                  id="moveRightBtn"
                  title="Move Selected"
                >
                  <i class="fas fa-angle-right"></i>
                </button>
                <button
                  class="mapping-btn"
                  id="moveLeftBtn"
                  title="Revert Selected"
                >
                  <i class="fas fa-angle-left"></i>
                </button>
                <button
                  class="mapping-btn"
                  id="moveAllLeftBtn"
                  title="Revert All"
                >
                  <i class="fas fa-angle-double-left"></i>
                </button>
              </div>
              <div class="mapping-list">
                <div class="mapping-list-header">Mapped Events</div>
                <div class="mapping-list-content" id="mappedEventsList">
                  <!-- Mapped events will be added here by JavaScript -->
                </div>
              </div>
            </div>
          </div>

          <!-- Events Table -->
          <div class="table-container">
            <table class="table">
              <thead>
                <tr>
                  <th>Image</th>
                  <th>Event Name</th>
                  <th>Badge</th>
                  <th>Start Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="eventsTableBody">
                <!-- Events will be added here by JavaScript -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="previewModal">
      <div class="showPreview">
        <div class="app-container mobile-view">
          <!-- Header Section -->
          <header class="header">
            <div class="header-content">
              <div class="greeting">Hello John!</div>
              <div class="header-icons">
                <img
                  src="./../assets/icons/notification.svg"
                  alt="Notifications"
                  class="icon"
                />
              </div>
            </div>

            <div class="search-filter-container">
              <div class="search-bar">
                <img
                  src="./../assets/icons/search.svg"
                  alt="Search"
                  class="search-icon"
                />
                <input type="text" placeholder="Search for events" />
              </div>
              <button class="filter-btn">
                <img
                  src="./../assets/icons/tune.svg"
                  alt="Filter"
                  class="filter-icon"
                />
              </button>
            </div>

            <!-- Top Navigation -->
            <nav class="top-nav">
              <a href="#" class="nav-item">
                <img
                  src="./../assets/icons/events_active.svg"
                  alt="Events"
                  class="nav-icon"
                />
                <span>Events</span>
              </a>
              <a href="#" class="nav-item">
                <img
                  src="./../assets/icons/venue_inactive.svg"
                  alt="Venues"
                  class="nav-icon"
                />
                <span>Venues</span>
              </a>
              <a href="#" class="nav-item">
                <img
                  src="./../assets/icons/sports_inactive.svg"
                  alt="Sports"
                  class="nav-icon"
                />
                <span>Sports</span>
              </a>
              <!-- <a href="#" class="nav-item">
                <img
                 src="./../assets/icons/teams_inactive.svg"
                  alt="Teams"
                  class="nav-icon"
                />
                <span>Teams</span>
              </a> -->
            </nav>
          </header>

          <!-- Main Content -->
          <main class="preview-main-content">
            <h2 class="section-title">Recommended Events</h2>

            <div class="preview-events-container"></div>
          </main>

          <!-- Footer Navigation -->
          <nav class="footer-nav">
            <a href="#" class="footer-item active">
              <img
                src="./../assets/icons/discover_active.svg"
                alt="Discover"
                class="footer-icon"
              />
              <span>Discover</span>
            </a>
            <a href="#" class="footer-item">
              <img
                src="./../assets/icons/community_inactive.svg"
                alt="Tickets"
                class="footer-icon"
              />
              <span>Tickets</span>
            </a>
            <a href="#" class="footer-item">
              <img
                src="./../assets/icons/ticket_inactive.svg"
                alt="Squads"
                class="footer-icon"
              />
              <span>Squads</span>
            </a>
            <a href="#" class="footer-item">
              <img
                src="./../assets/icons/profile_inactive.svg"
                alt="Account"
                class="footer-icon"
              />
              <span>Account</span>
            </a>
          </nav>
        </div>
      </div>
      <div id="showPreviewEventDetails">
        <div class="mobile-view app-container">
          <!-- Hero Section -->
          <section class="sporting-event__hero">
            <img
              src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
              alt="AFL Premiership 2024"
              class="sporting-event__hero-image"
            />
            <div class="sporting-event__hero-overlay">
              <div class="sporting-event__badge">AFL</div>
              <h1 class="sporting-event__hero-title">
                Toyota AFL Premiership 2024
              </h1>
              <p class="sporting-event__hero-date">
                Wednesday, 2 April onwards
              </p>
              <p class="sporting-event__hero-venue">Multiple Venues</p>
            </div>
          </section>

          <!-- Event Info Card -->
          <section class="sporting-event__details-card">
            <h2 class="sporting-event__details-title" id="eventDetailsTitle">
              About AFL
            </h2>
            <p
              class="sporting-event__details-description"
              id="eventDetailsDescription"
            >
              The Australian Football League is the pre-eminent and only fully
              professional competition of Australian rules football. It was
              originally named the Victorian Football League and was founded in
              1896 as a breakaway competition from the Victorian Football
              Association, with its inaugural season in 1897. The Toyota AFL
              Premiership Season consists of 23 rounds followed by a finals
              series featuring the top eight teams. The 2024 season promises to
              be the most exciting yet, with new teams, stadiums, and rule
              changes designed to enhance the speed and skill of the game.
            </p>
            <!-- <a href="#" class="sporting-event__read-more">Read more</a> -->
          </section>

          <!-- Additional Cards Section -->
          <section class="sporting-event__cards-container" id="cardsContainer">
            <!-- Cards will be dynamically inserted here -->
          </section>
        </div>
      </div>
    </div>

    <!-- Add/Edit Event Modal -->
    <div class="modal" id="eventModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="modalTitle">Add Event</h3>
          <button class="modal-close" id="closeModalBtn">&times;</button>
        </div>
        <div class="modal-body">
          <form id="eventForm">
            <!-- Search and Date Filters Section -->
            <div class="form-section">
              <h4 class="section-title">Search Fixtures</h4>
              <div class="form-row">
                <div class="form-group">
                  <label class="form-label">Sport</label>
                  <select class="form-control" id="fixtureSportFilter">
                    <option value="">All Sports</option>
                    <option value="football">Football</option>
                    <option value="basketball">Basketball</option>
                    <option value="tennis">Tennis</option>
                    <option value="cricket">Cricket</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label">Start Date</label>
                  <input
                    type="date"
                    class="form-control"
                    id="fixtureStartDateFilter"
                    placeholder="DD/MM/YYYY"
                  />
                </div>
                <div class="form-group">
                  <label class="form-label">End Date</label>
                  <input
                    type="date"
                    class="form-control"
                    id="fixtureEndDateFilter"
                    placeholder="DD/MM/YYYY"
                  />
                </div>
                <div class="form-group align-self-end">
                  <button
                    class="btn btn-primary"
                    id="applyFixtureFiltersBtn"
                    type="button"
                  >
                    <i class="fas fa-filter"></i> Apply Filters
                  </button>
                </div>
              </div>
            </div>

            <!-- Fixtures Mapping Section -->
            <div class="form-section">
              <h4 class="section-title">
                Fixtures Mapping <span class="required-indicator">*</span>
              </h4>
              <div class="mapping-container">
                <div class="mapping-list">
                  <div class="mapping-list-header">Searched Fixtures</div>
                  <div class="mapping-list-content" id="unmappedFixturesList">
                    <!-- Unmapped fixtures will be added here by JavaScript -->
                  </div>
                </div>

                <div class="mapping-controls">
                  <button
                    type="button"
                    class="mapping-btn"
                    id="moveAllFixturesRightBtn"
                    title="Move All"
                  >
                    <i class="fas fa-angle-double-right"></i>
                  </button>
                  <button
                    type="button"
                    class="mapping-btn"
                    id="moveFixtureRightBtn"
                    title="Move Selected"
                  >
                    <i class="fas fa-angle-right"></i>
                  </button>
                  <button
                    type="button"
                    class="mapping-btn"
                    id="moveFixtureLeftBtn"
                    title="Revert Selected"
                  >
                    <i class="fas fa-angle-left"></i>
                  </button>
                  <button
                    type="button"
                    class="mapping-btn"
                    id="moveAllFixturesLeftBtn"
                    title="Revert All"
                  >
                    <i class="fas fa-angle-double-left"></i>
                  </button>
                </div>

                <div class="mapping-list">
                  <div class="mapping-list-header">
                    Selected Fixtures For Event
                  </div>
                  <div class="mapping-list-content" id="mappedFixturesList">
                    <!-- Mapped fixtures will be added here by JavaScript -->
                  </div>
                </div>

                <!-- <div class="global-fixture-controls">
                  <button
                    type="button"
                    class="mapping-btn"
                    id="moveFixtureUpBtn"
                    title="Move Up"
                    disabled
                  >
                    <i class="fas fa-arrow-up"></i>
                  </button>
                  <button
                    type="button"
                    class="mapping-btn"
                    id="moveFixtureDownBtn"
                    title="Move Down"
                    disabled
                  >
                    <i class="fas fa-arrow-down"></i>
                  </button>
                </div> -->
              </div>
              <div
                id="fixtureError"
                class="error-message"
                style="display: none"
              >
                Please select at least one fixture
              </div>
            </div>

            <!-- Event Details Section -->
            <div class="form-section">
              <h4 class="section-title">Event Details</h4>
              <div class="form-row">
                <div class="form-group">
                  <label class="form-label"
                    >Event Name <span class="required-indicator">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="eventName"
                    required
                  />
                  <div
                    id="eventNameError"
                    class="error-message"
                    style="display: none"
                  >
                    Event name is required
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label"
                    >Badge Name <span class="required-indicator">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="badgeName"
                    required
                  />
                  <div
                    id="badgeNameError"
                    class="error-message"
                    style="display: none"
                  >
                    Badge name is required
                  </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label class="form-label"
                    >Start Date <span class="required-indicator">*</span></label
                  >
                  <input
                    type="date"
                    class="form-control"
                    id="startDate"
                    required
                  />
                  <div
                    id="startDateError"
                    class="error-message"
                    style="display: none"
                  >
                    Start date is required
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Multiple Venues?</label>
                  <div class="radio-group">
                    <div class="radio-option">
                      <input
                        type="radio"
                        id="multipleVenuesYes"
                        name="multipleVenues"
                        value="yes"
                      />
                      <label for="multipleVenuesYes">Yes</label>
                    </div>
                    <div class="radio-option">
                      <input
                        type="radio"
                        id="multipleVenuesNo"
                        name="multipleVenues"
                        value="no"
                        checked
                      />
                      <label for="multipleVenuesNo">No</label>
                    </div>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label class="form-label"
                  >About Event <span class="required-indicator">*</span></label
                >
                <textarea
                  class="form-control"
                  id="aboutEvent"
                  rows="5"
                  required
                ></textarea>
                <div
                  id="aboutEventError"
                  class="error-message"
                  style="display: none"
                >
                  About event is required
                </div>
              </div>

              <div class="form-group">
                <label class="form-label"
                  >Event Image <span class="required-indicator">*</span></label
                >
                <input
                  type="file"
                  class="form-control"
                  id="eventImage"
                  accept="image/*"
                  required
                />
                <div
                  id="eventImageError"
                  class="error-message"
                  style="display: none"
                >
                  Event image is required
                </div>
                <div
                  class="image-preview-container"
                  id="imagePreview"
                  style="display: none; margin-top: 10px"
                >
                  <img
                    id="previewImage"
                    src="#"
                    alt="Preview"
                    style="
                      max-width: 200px;
                      max-height: 200px;
                      border-radius: 4px;
                    "
                  />
                </div>
              </div>
            </div>
          </form>
        </div>

        <div class="modal-footer">
          <button class="btn btn-outline" id="cancelModalBtn">Cancel</button>
          <button class="btn btn-primary" id="saveEventBtn" disabled>
            Save Event
          </button>
        </div>
      </div>
    </div>
    <!-- Delete Confirmation Modal -->
    <div class="modal modal-overlay" id="deleteConfirmationModal">
      <div class="modal-content" style="max-width: 500px">
        <div class="modal-header">
          <h3 class="modal-title">Delete Event</h3>
          <button class="modal-close" id="closeDeleteModalBtn">&times;</button>
        </div>
        <div class="modal-body">
          <div style="text-align: center; margin-bottom: 20px">
            <i
              class="fas fa-exclamation-triangle"
              style="font-size: 48px; color: var(--warning-color)"
            ></i>
          </div>
          <div style="text-align: center">
            <h4 style="margin-bottom: 10px; color: var(--dark-color)">
              Warning: This event is in use!
            </h4>
            <p class="warning-text" style="margin-bottom: 15px; color: #555">
              This event is currently selected by
              <!-- <span id="userCount" style="font-weight: 600">0</span>  -->
              users. Deleting it will affect their recommendations.
            </p>
            <p style="margin-bottom: 10px">
              To confirm deletion, please type "<span
                id="eventNameToDelete"
                style="font-weight: 600"
              ></span
              >" below:
            </p>
            <div class="form-group" style="margin-bottom: 5px">
              <input
                type="text"
                id="confirmDeleteInput"
                class="form-control"
                placeholder="Type the event name"
                autocomplete="off"
              />
              <p
                class="error-message"
                id="deleteError"
                style="
                  display: none;
                  color: var(--danger-color);
                  margin-top: 5px;
                  font-size: 13px;
                "
              >
                The entered name doesn't match.
              </p>
            </div>
          </div>
        </div>
        <div class="modal-footer" style="justify-content: center">
          <button class="btn btn-outline" id="cancelDeleteBtn">Cancel</button>
          <button
            class="btn btn-danger"
            id="confirmDeleteBtn"
            disabled
            style="margin-left: 10px"
          >
            <i class="fas fa-trash"></i> Delete Event
          </button>
        </div>
      </div>
    </div>
  </body>
  <script type="module">
    import Sidebar from "./sidebar.js";
    import Navbar from "./navbar.js";

    document?.addEventListener("DOMContentLoaded", function () {
      const sidebar = document.querySelector(".sidebar");
      const navbar = document.querySelector(".navbar");
      sidebar.innerHTML = Sidebar("Events");
      navbar.innerHTML = Navbar("Events");
      // Add these variables at the top with other state variables
      let eventToDelete = null;

      // Sample data for events
      const events = [
        {
          id: 1,
          name: "Premier League Match",
          badge: "PL",
          startDate: "2025-06-15T20:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "football",
          status: "active",
          mappedFixtures: [1, 3],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 2,
          name: "NBA Finals Game 1",
          badge: "NBA",
          startDate: "2025-06-10T19:30:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "basketball",
          status: "active",
          mappedFixtures: [2],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 3,
          name: "Wimbledon Quarterfinals",
          badge: "Grand Slam",
          startDate: "2025-07-05T14:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "tennis",
          status: "upcoming",
          mappedFixtures: [4, 5],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 4,
          name: "ICC World Cup",
          badge: "ICC",
          startDate: "2025-10-20T09:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "cricket",
          status: "upcoming",
          mappedFixtures: [],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 5,
          name: "Champions League Final",
          badge: "UCL",
          startDate: "2025-05-28T21:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "football",
          status: "completed",
          mappedFixtures: [1, 2, 3],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        // Australian Events
        {
          id: 6,
          name: "AFL Grand Final",
          badge: "AFL",
          startDate: "2025-09-30T14:30:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "australian football",
          status: "upcoming",
          mappedFixtures: [6],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 7,
          name: "Australian Open Final",
          badge: "AO",
          startDate: "2025-01-29T17:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "tennis",
          status: "completed",
          mappedFixtures: [7, 8],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 8,
          name: "NRL Grand Final",
          badge: "NRL",
          startDate: "2025-10-01T19:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "rugby league",
          status: "upcoming",
          mappedFixtures: [9],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 9,
          name: "The Ashes 1st Test",
          badge: "Ashes",
          startDate: "2025-06-16T11:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "cricket",
          status: "active",
          mappedFixtures: [10],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 10,
          name: "Australian Grand Prix",
          badge: "F1",
          startDate: "2025-04-02T15:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "formula 1",
          status: "completed",
          mappedFixtures: [11],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 11,
          name: "Sydney to Hobart Yacht Race",
          badge: "S2H",
          startDate: "2025-12-26T12:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "sailing",
          status: "upcoming",
          mappedFixtures: [12],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 12,
          name: "Melbourne Cup",
          badge: "MC",
          startDate: "2025-11-07T15:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "horse racing",
          status: "upcoming",
          mappedFixtures: [],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 13,
          name: "Big Bash League Final",
          badge: "BBL",
          startDate: "2025-02-04T19:30:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "cricket",
          status: "completed",
          mappedFixtures: [13, 14],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 14,
          name: "Super Rugby Pacific Final",
          badge: "SRP",
          startDate: "2025-06-24T19:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "rugby union",
          status: "completed",
          mappedFixtures: [15],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 15,
          name: "Australian Baseball League Final",
          badge: "ABL",
          startDate: "2025-01-28T19:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "baseball",
          status: "completed",
          mappedFixtures: [16],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 16,
          name: "Netball Australia Championship",
          badge: "NA",
          startDate: "2025-09-15T18:30:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "netball",
          status: "upcoming",
          mappedFixtures: [17],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 17,
          name: "UCI Road World Championships",
          badge: "UCI",
          startDate: "2025-09-23T09:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "cycling",
          status: "active",
          mappedFixtures: [18],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 18,
          name: "Hockey Australia League Final",
          badge: "HA",
          startDate: "2025-10-22T19:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "hockey",
          status: "upcoming",
          mappedFixtures: [19],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 19,
          name: "Australian Athletics Championships",
          badge: "AAC",
          startDate: "2025-04-15T10:00:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "athletics",
          status: "completed",
          mappedFixtures: [20],
          multipleVenues: "Yes",
          about: "This is about section",
        },
        {
          id: 20,
          name: "Supercars Championship",
          badge: "SC",
          startDate: "2025-08-05T13:30:00",
          image:
            "https://www.shutterstock.com/shutterstock/photos/1037719192/display_1500/stock-vector-default-ui-image-placeholder-for-wireframes-for-apps-and-websites-1037719192.jpg",
          sport: "motorsport",
          status: "active",
          mappedFixtures: [],
          multipleVenues: "Yes",
          about: "This is about section",
        },
      ];
      // Enhanced sample data for all fixtures with more details
      const allFixtures = [
        {
          id: 1,
          name: "Fixture A: Team X vs Team Y",
          sport: "football",
          date: "2025-01-15",
          status: "upcoming",
        },
        {
          id: 2,
          name: "Fixture B: Team A vs Team B",
          sport: "basketball",
          date: "2025-02-16",
          status: "upcoming",
        },
        {
          id: 3,
          name: "Fixture C: Player 1 vs Player 2",
          sport: "tennis",
          date: "2025-03-17",
          status: "upcoming",
        },
        {
          id: 4,
          name: "Fixture D: Team M vs Team N",
          sport: "cricket",
          date: "2025-06-18",
          status: "upcoming",
        },
        {
          id: 5,
          name: "Fixture E: Team P vs Team Q",
          sport: "football",
          date: "2025-06-19",
          status: "upcoming",
        },
        {
          id: 6,
          name: "Fixture F: Team R vs Team S",
          sport: "basketball",
          date: "2025-06-20",
          status: "upcoming",
        },
        {
          id: 7,
          name: "Fixture G: Player 3 vs Player 4",
          sport: "tennis",
          date: "2025-06-21",
          status: "upcoming",
        },
        {
          id: 8,
          name: "Fixture H: Team U vs Team V",
          sport: "cricket",
          date: "2025-06-22",
          status: "upcoming",
        },
        {
          id: 9,
          name: "Fixture I: Team W vs Team Z",
          sport: "football",
          date: "2025-06-23",
          status: "upcoming",
        },
        {
          id: 10,
          name: "Fixture J: Team K vs Team L",
          sport: "basketball",
          date: "2025-06-24",
          status: "upcoming",
        },
        {
          id: 11,
          name: "Fixture K: Player 5 vs Player 6",
          sport: "tennis",
          date: "2025-06-25",
          status: "upcoming",
        },
        {
          id: 12,
          name: "Fixture L: Team O vs Team P",
          sport: "cricket",
          date: "2025-06-26",
          status: "upcoming",
        },
      ];

      const fixtures = [
        {
          id: 1,
          imageUrl:
            "https://images.unsplash.com/photo-1574629810360-7efbbe195018?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
          altText: "Richmond Tigers team",
          badgeText: "TEAM",
          title: "Richmond Tigers",
          subtitle: "2024 Season Preview",
          date: "Season starts March 10",
          distance: "6.1 KM",
        },
        {
          id: 2,
          imageUrl:
            "https://images.unsplash.com/photo-1543351611-58f69d7c1781?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
          altText: "Melbourne Cricket Ground",
          badgeText: "VENUE",
          title: "MCG Stadium",
          subtitle: "Home of Grand Final",
          date: "Capacity: 100,024",
          distance: "2.5 KM",
        },
        {
          id: 3,
          imageUrl:
            "https://images.unsplash.com/photo-1517649763962-0c623066013b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
          altText: "AFL players celebrating",
          badgeText: "SCHEDULE",
          title: "Season Schedule",
          subtitle: "March - September 2024",
          date: "23 rounds",
          distance: "View all",
        },
        {
          id: 4,
          imageUrl:
            "https://images.unsplash.com/photo-1540747913346-19e32dc3e97e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
          altText: "AFL match action",
          badgeText: "HIGHLIGHTS",
          title: "Match Highlights",
          subtitle: "Round 1 Recap",
          date: "New season",
          distance: "Watch now",
        },
        {
          id: 5,
          imageUrl:
            "https://images.unsplash.com/photo-1517649763962-0c623066013b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
          altText: "AFL players training",
          badgeText: "STATS",
          title: "Player Stats",
          subtitle: "Top Performers",
          date: "Updated weekly",
          distance: "View leaders",
        },
        {
          id: 6,
          imageUrl:
            "https://images.unsplash.com/photo-1574629810360-7efbbe195018?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
          altText: "AFL fans cheering",
          badgeText: "FANS",
          title: "Fan Zone",
          subtitle: "Join the Community",
          date: "50K+ members",
          distance: "Join now",
        },
      ];

      // Variables for infinite scrolling
      let currentPage = 1;
      const fixturesPerPage = 5;
      let filteredFixtures = [...allFixtures];
      let isFetching = false;

      // DOM Elements for fixtures filtering
      const fixtureSportFilter = document.getElementById("fixtureSportFilter");
      const fixtureStartDateFilter = document.getElementById(
        "fixtureStartDateFilter"
      );
      const fixtureEndDateFilter = document.getElementById(
        "fixtureEndDateFilter"
      );
      const applyFixtureFiltersBtn = document.getElementById(
        "applyFixtureFiltersBtn"
      );
      const unmappedFixturesList = document.getElementById(
        "unmappedFixturesList"
      );

      // Set up infinite scroll for unmapped fixtures
      unmappedFixturesList.addEventListener("scroll", function () {
        if (isFetching) return;

        const { scrollTop, scrollHeight, clientHeight } = unmappedFixturesList;
        if (scrollTop + clientHeight >= scrollHeight - 10) {
          loadMoreFixtures();
        }
      });

      // Function to load more fixtures
      function loadMoreFixtures() {
        if (isFetching) return;

        isFetching = true;
        currentPage++;

        // Simulate API delay
        setTimeout(() => {
          renderFixturesLists();
          isFetching = false;
        }, 500);
      }

      // Function to filter fixtures based on criteria
      function filterFixtures() {
        const sport = fixtureSportFilter.value;
        const startDate = fixtureStartDateFilter.value;
        const endDate = fixtureEndDateFilter.value;

        filteredFixtures = allFixtures.filter((fixture) => {
          // Filter by sport
          if (sport && fixture.sport !== sport) return false;

          // Filter by date range
          if (startDate && fixture.date < startDate) return false;
          if (endDate && fixture.date > endDate) return false;

          return true;
        });

        currentPage = 1;
        renderFixturesLists();
      }

      // Modified renderFixturesLists function to implement pagination
      function renderFixturesLists() {
        const startIdx = 0;
        const endIdx = currentPage * fixturesPerPage;
        const fixturesToShow = filteredFixtures.slice(0, endIdx);

        // Clear only if it's the first page
        if (currentPage === 1) {
          unmappedFixturesList.innerHTML = "";
        }

        // Unmapped fixtures (filter out already mapped fixtures)
        const unmappedFixtures = fixturesToShow.filter(
          (f) => !currentEventMappedFixtures.includes(f.id)
        );

        unmappedFixtures.forEach((fixture) => {
          const isSelected = selectedUnmappedFixtures.includes(fixture.id);
          const item = document.createElement("div");
          item.className = `mapping-item ${isSelected ? "selected" : ""}`;
          item.setAttribute("data-id", fixture.id);

          // Add more fixture details to the display
          item.innerHTML = `
                    <div>
                        <strong>${fixture.name}</strong>
                        <div style="font-size: 12px; color: #666;">
                            <span>${
                              fixture.sport.charAt(0).toUpperCase() +
                              fixture.sport.slice(1)
                            }</span> |
                            <span>${new Date(
                              fixture.date
                            ).toLocaleDateString()}</span> 
                            </span>
                        </div>
                    </div>
                `;

          item?.addEventListener("click", function () {
            const fixtureId = parseInt(this.getAttribute("data-id"));
            toggleUnmappedFixtureSelection(fixtureId);
          });

          // Only append if not already in the list
          if (
            !document.querySelector(
              `#unmappedFixturesList [data-id="${fixture.id}"]`
            )
          ) {
            unmappedFixturesList.appendChild(item);
          }
        });

        // Mapped fixtures (in the order they're stored)
        mappedFixturesList.innerHTML = "";

        currentEventMappedFixtures.forEach((fixtureId, index) => {
          const fixture = allFixtures.find((f) => f.id === fixtureId);
          if (!fixture) return;

          console.log(
            "currentEventMappedFixtures",
            currentEventMappedFixtures.length,
            index
          );

          const isSelected = selectedMappedFixtures.includes(fixture.id);
          const item = document.createElement("div");
          item.className = `mapping-item ${isSelected ? "selected" : ""}`;
          item.setAttribute("data-id", fixture.id);

          item.innerHTML = `
                    <div>
                        <strong>${fixture.name}</strong>
                        <div style="font-size: 12px; color: #666;">
                            <span>${
                              fixture.sport.charAt(0).toUpperCase() +
                              fixture.sport.slice(1)
                            }   </span>
                            <span>${new Date(
                              fixture.date
                            ).toLocaleDateString()}  </span> 
                            <span class="badge ${
                              fixture.status === "completed"
                                ? "badge-success"
                                : "badge-warning"
                            }">
                                ${fixture.status}
                            </span>
                        </div>
                    </div>
                    <div class="mapped-item-controls">
                        <button class="mapped-item-btn ${
                          index == 0 ? "disableBtn" : "up-btn"
                        }" title="Move up" data-id="${fixture.id}">
                            <i class="fas fa-arrow-up"></i>
                        </button>
                        <button class="mapped-item-btn ${
                          index == currentEventMappedFixtures.length - 1
                            ? "disableBtn"
                            : "down-btn"
                        } "  title="Move down" data-id="${fixture.id}">
                            <i class="fas fa-arrow-down"></i>
                        </button>
                    </div>
                `;

          item?.addEventListener("click", function (e) {
            // Don't toggle selection if clicking on controls
            if (e.target.closest(".mapped-item-controls")) return;

            const fixtureId = parseInt(this.getAttribute("data-id"));
            toggleMappedFixtureSelection(fixtureId);
          });

          mappedFixturesList.appendChild(item);
        });

        // Add event listeners to up/down buttons
        document.querySelectorAll(".up-btn").forEach((btn) => {
          btn?.addEventListener("click", function (e) {
            e.stopPropagation();
            const fixtureId = parseInt(this.getAttribute("data-id"));
            moveMappedFixtureUp(fixtureId);
          });
        });

        document.querySelectorAll(".down-btn").forEach((btn) => {
          btn?.addEventListener("click", function (e) {
            e.stopPropagation();
            const fixtureId = parseInt(this.getAttribute("data-id"));
            moveMappedFixtureDown(fixtureId);
          });
        });
        // Update button states
        updateFixtureButtonsState();
      }

      // Setup event listeners for fixture filters
      applyFixtureFiltersBtn?.addEventListener("click", filterFixtures);

      // Set default dates for fixture filters
      const today = new Date().toISOString().split("T")[0];
      const nextWeek = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)
        .toISOString()
        .split("T")[0];
      fixtureStartDateFilter.value = today;
      fixtureEndDateFilter.value = nextWeek;

      // Sample data for pending events (for mapping)
      const pendingEvents = [
        { id: 6, name: "MLB All-Star Game" },
        { id: 7, name: "Tour de France Stage 1" },
        { id: 8, name: "US Open Golf Championship" },
        { id: 9, name: "Formula 1 Monaco GP" },
        { id: 10, name: "Olympic 100m Final" },
      ];

      // Sample data for mapped events (initially empty)
      let mappedEvents = [];

      // DOM Elements
      const navbarToggle = document.getElementById("navbarToggle");
      const eventsTableBody = document.getElementById("eventsTableBody");
      const sportFilter = document.getElementById("sportFilter");
      const startDateFilter = document.getElementById("startDateFilter");
      const endDateFilter = document.getElementById("endDateFilter");
      const applyFiltersBtn = document.getElementById("applyFiltersBtn");
      const mapEventsBtn = document.getElementById("mapEventsBtn");
      const mappingSection = document.getElementById("mappingSection");
      const closeMappingBtn = document.getElementById("closeMappingBtn");
      const pendingEventsList = document.getElementById("pendingEventsList");
      const mappedEventsList = document.getElementById("mappedEventsList");
      const moveAllRightBtn = document.getElementById("moveAllRightBtn");
      const moveRightBtn = document.getElementById("moveRightBtn");
      const moveLeftBtn = document.getElementById("moveLeftBtn");
      const moveAllLeftBtn = document.getElementById("moveAllLeftBtn");
      const eventModal = document.getElementById("eventModal");
      const modalTitle = document.getElementById("modalTitle");
      const eventForm = document.getElementById("eventForm");
      const addEventBtn = document.getElementById("addEventBtn");
      const previewEventBtn = document.getElementById("previewEventBtn");
      const previewModal = document.querySelector(".previewModal");
      const showPreview = document.querySelector(".showPreview");
      const showPreviewEventDetails = document.getElementById(
        "showPreviewEventDetails"
      );
      const appContainer = document.querySelector(".app-container");
      const closeModalBtn = document.getElementById("closeModalBtn");
      const cancelModalBtn = document.getElementById("cancelModalBtn");
      const saveEventBtn = document.getElementById("saveEventBtn");
      const mappedFixturesList = document.getElementById("mappedFixturesList");
      const moveAllFixturesRightBtn = document.getElementById(
        "moveAllFixturesRightBtn"
      );
      const moveFixtureRightBtn = document.getElementById(
        "moveFixtureRightBtn"
      );
      const moveFixtureLeftBtn = document.getElementById("moveFixtureLeftBtn");
      const moveAllFixturesLeftBtn = document.getElementById(
        "moveAllFixturesLeftBtn"
      );
      const upFixtureBtn = document.getElementById("upFixtureBtn");
      const downFixtureBtn = document.getElementById("downFixtureBtn");
      const menuToggle = document.querySelector(".menu-toggle");

      // Current state
      let currentEventId = null;
      let selectedPendingEvents = [];
      let selectedMappedEvents = [];
      let selectedUnmappedFixtures = [];
      let selectedMappedFixtures = [];
      let currentEventMappedFixtures = [];

      // Initialize the page
      function init() {
        renderEventsTable(events);
        setupEventListeners();
        validateForm();

        // Set default dates for filters
        // const today = new Date().toISOString().split("T")[0];
        // startDateFilter.value = today;
        // endDateFilter.value = today;
      }

      // Toggle sidebar on mobile
      function toggleSidebar() {
        sidebar.classList.toggle("active");
      }

      // Render events table
      function renderEventsTable(eventsToRender) {
        eventsTableBody.innerHTML = "";

        if (eventsToRender.length === 0) {
          eventsTableBody.innerHTML =
            '<tr><td colspan="5" style="text-align: center;">No events found</td></tr>';
          return;
        }

        eventsToRender.forEach((event) => {
          const row = document.createElement("tr");

          // Format date
          const eventDate = new Date(new Date(event.startDate));
          const formattedDate = eventDate.toLocaleDateString("en-US", {
            year: "numeric",
            month: "short",
            day: "numeric",
            hour: "2-digit",
            minute: "2-digit",
          });

          // Determine badge class based on status
          let badgeClass = "badge-primary";
          if (event.status === "completed") badgeClass = "badge-success";
          if (event.status === "upcoming") badgeClass = "badge-warning";

          row.innerHTML = `
    <td>
        <div id="eventListImg"><img src="${event.image}" alt="${event.name}" class="event-image"></div>
    </td>
    <td>${event.name}</td>
    <td><span class="badge ${badgeClass}">${event.badge}</span></td>
    <td>${formattedDate}</td>
    <td>
        <div class="action-buttons">
            <button class="action-btn view-event-btn view tooltip" data-id="${event.id}">
                <i class="fas fa-eye"></i>
                <span class="tooltiptext">Preview</span>
            </button>
            <button class="action-btn edit-event-btn edit tooltip" data-id="${event.id}">
                <i class="fas fa-pen"></i>
                <span class="tooltiptext">Edit</span>
            </button>
            <button class="action-btn delete-event-btn danger delete tooltip" data-id="${event.id}">
                <i class="fas fa-trash"></i>
                <span class="tooltiptext">Delete</span>
            </button>
        </div>
    </td>
`;

          // Update the delete button event listener
          document.querySelectorAll(".delete-event-btn").forEach((btn) => {
            btn?.addEventListener("click", function () {
              const eventId = parseInt(this.getAttribute("data-id"));
              openDeleteConfirmation(eventId);
            });
          });

          eventsTableBody.appendChild(row);
        });

        // Add event listeners to action buttons
        document.querySelectorAll(".view-event-btn").forEach((btn) => {
          btn?.addEventListener("click", function () {
            const eventId = parseInt(this.getAttribute("data-id"));
             loadEventDetails(eventId);
            // showEventDetails(eventId);
          });
        });

        document.querySelectorAll(".edit-event-btn").forEach((btn) => {
          btn?.addEventListener("click", function () {
            const eventId = parseInt(this.getAttribute("data-id"));
            openEditEventModal(eventId);
          });
        });
      }

      // View event details
      function viewEventDetails(eventId) {
        alert(
          `Viewing event details for ID: ${eventId}\nIn a real implementation, this would navigate to the event details page`
        );
      }

      // Open edit event modal
      function openEditEventModal(eventId) {
        const event = events.find((e) => e.id === eventId);
        if (!event) return;

        currentEventId = eventId;
        modalTitle.textContent = "Edit Event";
        currentEventMappedFixtures = [...event.mappedFixtures];

        // Fill form with event data
        document.getElementById("eventName").value = event.name;
        document.getElementById("badgeName").value = event.badge;

        // Format date for datetime-local input
        const eventDate = new Date(new Date(event.startDate));
        const formattedDate = eventDate.toISOString().slice(0, 16);
        document.getElementById("startDate").value = formattedDate;

        // document.getElementById("about").value = event.about;
        document.getElementById("aboutEvent").value = event.about;

        // Set multiple venues radio
        if (event.multipleVenues) {
          document.getElementById("multipleVenuesYes").checked = true;
        } else {
          document.getElementById("multipleVenuesNo").checked = true;
        }

        // Render fixtures lists
        renderFixturesLists();

        // Show modal
        eventModal.style.display = "block";
      }

      // Open add event modal
      function openAddEventModal() {
        currentEventId = null;
        currentEventMappedFixtures = [];

        // Reset form
        eventForm.reset();
        document.getElementById("multipleVenuesYes").checked = true;

        // Disable save button initially
        saveEventBtn.disabled = true;

        // Render fixtures lists
        renderFixturesLists();

        // Show modal
        eventModal.style.display = "block";
      }

      function openPreviewEventModal() {
        renderPreviewEvents();
        document.querySelector(".content-wrapper").style.display = "none";
        document.querySelector(".previewModal").style.display = "block";
        showPreview.style.display = "block";
      }
      function closePreviewEventModal() {
        document.querySelector(".content-wrapper").style.display = "block";
        document.querySelector(".previewModal").style.display = "none";
      }
      function closePreviewEventDetailModal() {
        closePreviewEventModal();
        showPreviewEventDetails.style.display = "none";
      }
      function stopPropagationPreviewEventModal(e) {
        e.stopPropagation();
      }
      // function checkFormValidity() {
      //   const eventName = document.getElementById("eventName").value;
      //   const startDate = document.getElementById("startDate").value;
      //   const aboutEvent = document.getElementById("aboutEvent").value;

      //   saveEventBtn.disabled = !(eventName && startDate && aboutEvent && );
      // }
      
      function renderPreviewEvents() {
        const container = document.querySelector(".preview-events-container");
        container.innerHTML = ""; // Clear existing content

        events.forEach((event) => {
          // Format date to be more readable (e.g., "Today, 7:30 PM")
          const eventDate = new Date(event.startDate).toLocaleDateString(
            "en-US",
            {
              year: "numeric",
              month: "long",
              day: "numeric",
            }
          );

          // Create event card
          const eventCard = document.createElement("div");
          eventCard.className = "preview-event-card";
          eventCard.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.7)), url('${event.image}')`;
          eventCard.dataset.id = event.id; // Store event ID for reference

          // Create badge
          const badge = document.createElement("div");
          badge.className = "preview-event-badge";
          badge.textContent = event.badge;

          // Create content container
          const content = document.createElement("div");
          content.className = "preview-event-content";

          // Create title
          const title = document.createElement("h3");
          title.className = "preview-event-title";
          title.textContent = event.name;

          // Create subtitle (using sport as venue for demo)
          const subtitle = document.createElement("p");
          subtitle.className = "preview-event-subtitle";
          subtitle.textContent = `${
            event.sport.charAt(0).toUpperCase() + event.sport.slice(1)
          } Event`;

          // Create info container
          const info = document.createElement("div");
          info.className = "preview-event-info";

          // Create date
          const date = document.createElement("p");
          date.className = "preview-event-date";
          date.textContent = eventDate;

          // Create distance (random for demo)
          const distance = document.createElement("p");
          distance.className = "preview-event-distance";
          distance.textContent = `${(Math.random() * 10).toFixed(1)} KM`;

          // Assemble the elements
          info.appendChild(date);
          info.appendChild(distance);
          content.appendChild(title);
          content.appendChild(subtitle);
          content.appendChild(info);
          eventCard.appendChild(badge);
          eventCard.appendChild(content);
          container.appendChild(eventCard);

          // Add click handlers
          eventCard.addEventListener("click", function () {
            loadEventDetails(event.id);
            // renderCards();
            showPreview.style.display = "none";
            showPreviewEventDetails.style.display = "block";

            console.log(`Event ${event.id} clicked (card)`);
            // Here you would typically navigate to event details
          });

          // Prevent card click when clicking on child elements
          [badge, content, title, subtitle, info, date, distance].forEach(
            (child) => {
              child.addEventListener("click", function (e) {
                e.stopPropagation();
                console.log(`Event ${event.id} clicked (${child.className})`);
                // Handle specific child element clicks if needed
              });
            }
          );
        });
      }

      // Render pending and mapped events lists
      function renderEventsLists() {
        pendingEventsList.innerHTML = "";
        mappedEventsList.innerHTML = "";

        // Pending events (filter out already mapped events)
        const availablePendingEvents = pendingEvents.filter(
          (pe) => !mappedEvents.some((me) => me.id === pe.id)
        );

        availablePendingEvents.forEach((event) => {
          const isSelected = selectedPendingEvents.includes(event.id);
          const item = document.createElement("div");
          item.className = `mapping-item ${isSelected ? "selected" : ""}`;
          item.setAttribute("data-id", event.id);
          item.innerHTML = event.name;

          item?.addEventListener("click", function () {
            const eventId = parseInt(this.getAttribute("data-id"));
            togglePendingEventSelection(eventId);
          });

          pendingEventsList.appendChild(item);
        });

        // Mapped events
        mappedEvents.forEach((event, index) => {
          const isSelected = selectedMappedEvents.includes(event.id);
          const item = document.createElement("div");
          item.className = `mapping-item ${isSelected ? "selected" : ""}`;
          item.setAttribute("data-id", event.id);

          item.innerHTML = `
                    ${event.name}
                    <div class="mapped-item-controls">
                        <button class="mapped-item-btn up-btn" title="Move up" data-id="${event.id}">
                            <i class="fas fa-arrow-up"></i>
                        </button>
                        <button class="mapped-item-btn down-btn" title="Move down" data-id="${event.id}">
                            <i class="fas fa-arrow-down"></i>
                        </button>
                    </div>
                `;

          item?.addEventListener("click", function (e) {
            // Don't toggle selection if clicking on controls
            if (e.target.closest(".mapped-item-controls")) return;

            const eventId = parseInt(this.getAttribute("data-id"));
            toggleMappedEventSelection(eventId);
          });

          mappedEventsList.appendChild(item);
        });

        // Add event listeners to up/down buttons
        document.querySelectorAll(".up-btn").forEach((btn) => {
          btn?.addEventListener("click", function (e) {
            e.stopPropagation();
            const eventId = parseInt(this.getAttribute("data-id"));
            moveMappedEventUp(eventId);
          });
        });

        document.querySelectorAll(".down-btn").forEach((btn) => {
          btn?.addEventListener("click", function (e) {
            e.stopPropagation();
            const eventId = parseInt(this.getAttribute("data-id"));
            moveMappedEventDown(eventId);
          });
        });
      }

      // Move mapped event up in order
      function moveMappedEventUp(eventId) {
        const index = mappedEvents.findIndex((e) => e.id === eventId);
        if (index <= 0) return;

        // Swap with previous item
        [mappedEvents[index], mappedEvents[index - 1]] = [
          mappedEvents[index - 1],
          mappedEvents[index],
        ];
        renderEventsLists();
      }

      // Move mapped event down in order
      function moveMappedEventDown(eventId) {
        const index = mappedEvents.findIndex((e) => e.id === eventId);
        if (index === -1 || index >= mappedEvents.length - 1) return;

        // Swap with next item
        [mappedEvents[index], mappedEvents[index + 1]] = [
          mappedEvents[index + 1],
          mappedEvents[index],
        ];
        renderEventsLists();
      }

      // Toggle pending event selection
      function togglePendingEventSelection(eventId) {
        const index = selectedPendingEvents.indexOf(eventId);
        if (index === -1) {
          selectedPendingEvents.push(eventId);
        } else {
          selectedPendingEvents.splice(index, 1);
        }

        // Update UI
        const item = pendingEventsList.querySelector(`[data-id="${eventId}"]`);
        if (item) {
          item.classList.toggle("selected");
        }
      }

      // Toggle mapped event selection
      function toggleMappedEventSelection(eventId) {
        const index = selectedMappedEvents.indexOf(eventId);
        if (index === -1) {
          selectedMappedEvents.push(eventId);
        } else {
          selectedMappedEvents.splice(index, 1);
        }

        // Update UI
        const item = mappedEventsList.querySelector(`[data-id="${eventId}"]`);
        if (item) {
          item.classList.toggle("selected");
        }
      }

      // Toggle unmapped fixture selection
      function toggleUnmappedFixtureSelection(fixtureId) {
        const index = selectedUnmappedFixtures.indexOf(fixtureId);
        if (index === -1) {
          selectedUnmappedFixtures.push(fixtureId);
        } else {
          selectedUnmappedFixtures.splice(index, 1);
        }

        // Update UI
        const item = unmappedFixturesList.querySelector(
          `[data-id="${fixtureId}"]`
        );
        if (item) {
          item.classList.toggle("selected");
        }
        updateFixtureButtonsState();
      }

      // Toggle mapped fixture selection
      function toggleMappedFixtureSelection(fixtureId) {
        const index = selectedMappedFixtures.indexOf(fixtureId);
        if (index === -1) {
          selectedMappedFixtures.push(fixtureId);
        } else {
          selectedMappedFixtures.splice(index, 1);
        }

        // Update UI
        const item = mappedFixturesList.querySelector(
          `[data-id="${fixtureId}"]`
        );
        if (item) {
          item.classList.toggle("selected");
        }
        updateFixtureButtonsState();
      }

      // Move selected pending events to mapped
      function moveSelectedPendingToMapped() {
        if (selectedPendingEvents.length === 0) {
          alert("Please select at least one event to move");
          return;
        }

        selectedPendingEvents.forEach((eventId) => {
          const event = pendingEvents.find((e) => e.id === eventId);
          if (event && !mappedEvents.some((e) => e.id === eventId)) {
            mappedEvents.push(event);
          }
        });

        selectedPendingEvents = [];
        renderEventsLists();
      }

      // Move all pending events to mapped
      function moveAllPendingToMapped() {
        pendingEvents.forEach((event) => {
          if (!mappedEvents.some((e) => e.id === event.id)) {
            mappedEvents.push(event);
          }
        });

        selectedPendingEvents = [];
        renderEventsLists();
      }

      // Revert selected mapped events to pending
      function revertSelectedMappedToPending() {
        if (selectedMappedEvents.length === 0) {
          alert("Please select at least one event to revert");
          return;
        }

        mappedEvents = mappedEvents.filter(
          (event) => !selectedMappedEvents.includes(event.id)
        );

        selectedMappedEvents = [];
        renderEventsLists();
      }

      // Revert all mapped events to pending
      function revertAllMappedToPending() {
        mappedEvents = [];
        selectedMappedEvents = [];
        renderEventsLists();
      }

      // Move selected unmapped fixtures to mapped
      function moveSelectedFixturesToMapped() {
        if (selectedUnmappedFixtures.length === 0) {
          alert("Please select at least one fixture to move");
          return;
        }

        selectedUnmappedFixtures.forEach((fixtureId) => {
          if (!currentEventMappedFixtures.includes(fixtureId)) {
            currentEventMappedFixtures.push(fixtureId);
          }
        });

        selectedUnmappedFixtures = [];
        renderFixturesLists();
        updateFixtureButtonsState();
        validateForm();
      }

      // Move all unmapped fixtures to mapped
      function moveAllFixturesToMapped() {
        allFixtures.forEach((fixture) => {
          if (!currentEventMappedFixtures.includes(fixture.id)) {
            currentEventMappedFixtures.push(fixture.id);
          }
        });

        selectedUnmappedFixtures = [];
        renderFixturesLists();
        updateFixtureButtonsState();
        validateForm();
      }

      // Revert selected mapped fixtures to unmapped
      function revertSelectedFixturesToUnmapped() {
        if (selectedMappedFixtures.length === 0) {
          alert("Please select at least one fixture to revert");
          return;
        }

        currentEventMappedFixtures = currentEventMappedFixtures.filter(
          (id) => !selectedMappedFixtures.includes(id)
        );

        selectedMappedFixtures = [];
        renderFixturesLists();
        updateFixtureButtonsState();
        validateForm();
      }

      // Revert all mapped fixtures to unmapped
      function revertAllFixturesToUnmapped() {
        currentEventMappedFixtures = [];
        selectedMappedFixtures = [];
        renderFixturesLists();
        updateFixtureButtonsState();
        validateForm();
      }

      // Move mapped fixture up in order
      function moveMappedFixtureUp(fixtureId) {
        const index = currentEventMappedFixtures.indexOf(fixtureId);
        if (index <= 0) return;

        // Swap with previous item
        [
          currentEventMappedFixtures[index],
          currentEventMappedFixtures[index - 1],
        ] = [
          currentEventMappedFixtures[index - 1],
          currentEventMappedFixtures[index],
        ];
        renderFixturesLists();
      }

      // Move mapped fixture down in order
      function moveMappedFixtureDown(fixtureId) {
        const index = currentEventMappedFixtures.indexOf(fixtureId);
        if (index === -1 || index >= currentEventMappedFixtures.length - 1)
          return;

        // Swap with next item
        [
          currentEventMappedFixtures[index],
          currentEventMappedFixtures[index + 1],
        ] = [
          currentEventMappedFixtures[index + 1],
          currentEventMappedFixtures[index],
        ];
        renderFixturesLists();
      }

      // Apply filters to events
      function applyFilters() {
        const sport = sportFilter.value;
        const startDate = startDateFilter.value;
        const endDate = endDateFilter.value;

        let filteredEvents = [...events];

        // Filter by sport
        if (sport) {
          filteredEvents = filteredEvents.filter(
            (event) => event.sport === sport
          );
        }

        // Filter by start date
        if (startDate) {
          filteredEvents = filteredEvents.filter((event) => {
            const eventDate = new Date(event.startDate)
              .toISOString()
              .split("T")[0];
            return eventDate >= startDate;
          });
        }

        // Filter by end date
        if (endDate) {
          filteredEvents = filteredEvents.filter((event) => {
            const eventDate = new Date(event.startDate)
              .toISOString()
              .split("T")[0];
            return eventDate <= endDate;
          });
        }

        console.log(sport, startDate, endDate);

        renderEventsTable(filteredEvents);
      }

      // Save event (add or update)
      async function saveEvent() {
        // Validate form
        // if (!eventForm.checkValidity()) {
        //   eventForm.reportValidity();
        //   console.log("hey1")
        //   return false;
        // }

        const eventImage = document.getElementById("eventImage");
        const eventName = document.getElementById("eventName").value;
        const badgeName = document.getElementById("badgeName").value;
        const startDate = document.getElementById("startDate").value;
        const about = document.getElementById("aboutEvent").value;
        const multipleVenues =
          document.getElementById("multipleVenuesYes").checked;

        // Function to handle image file reading
        async function getImageData(imageFile) {
          return new Promise((resolve, reject) => {
            if (!imageFile) {
              resolve("https://via.placeholder.com/150"); // Default image if none provided
              return;
            }

            const reader = new FileReader();
            reader.onload = (e) => resolve(e.target.result);
            reader.onerror = (error) => reject(error);
            reader.readAsDataURL(imageFile);
          });
        }

        const imageFile = eventImage.files[0];
        const imageData = await getImageData(imageFile);

        if (currentEventId) {
          // Update existing event
          const eventIndex = events.findIndex((e) => e.id === currentEventId);
          if (eventIndex !== -1) {
            const event = events[eventIndex];
            events[eventIndex] = {
              ...events[eventIndex],
              image: imageData || event.image,
              name: eventName || event.name,
              badge: badgeName || event.badge,
              startDate: startDate || event.startDate,
              about: about || event.about,
              multipleVenues: multipleVenues || event.multipleVenues,
              mappedFixtures: [...currentEventMappedFixtures],
            };
          }
        } else {
          // Add new event
          const newId = Math.max(...events.map((e) => e.id), 0) + 1;
          events.unshift({
            id: newId,
            name: eventName,
            badge: badgeName,
            startDate: startDate,
            image: imageData || "https://via.placeholder.com/150",
            sport: "football", // Default, would be from form in real implementation
            status: "upcoming", // Default
            about: about,
            multipleVenues: multipleVenues,
            mappedFixtures: [...currentEventMappedFixtures],
          });
        }
        renderEventsTable(events);
        eventModal.style.display = "none";

        return true;
      }

      // Function to load event details and fixtures
      function loadEventDetails(eventId) {
        document.querySelector(".content-wrapper").style.display = "none";
        document.querySelector(".previewModal").style.display = "block";
        document.querySelector(".showPreview").style.display = "none";
        document.getElementById("showPreviewEventDetails").style.display = "block"
        // Find the event in your events array
        const event = events.find((e) => e.id === eventId);
        if (!event) return;

        // Update the hero section
        const heroImage = document.querySelector(".sporting-event__hero-image");
        const heroBadge = document.querySelector(".sporting-event__badge");
        const heroTitle = document.querySelector(".sporting-event__hero-title");
        const heroDate = document.querySelector(".sporting-event__hero-date");
        const heroVenue = document.querySelector(".sporting-event__hero-venue");

        // Set hero image (use event.image if available, otherwise fallback)
        heroImage.src =
          event.image ||
          "https://images.unsplash.com/photo-1574629810360-7efbbe195018?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80";
        heroImage.alt = event.name;

        // Set hero content
        heroBadge.textContent = event.badge;
        heroTitle.textContent = event.name;

        // Format date
        const eventDate = new Date(event.startDate);
        const formattedDate = eventDate.toLocaleDateString("en-US", {
          weekday: "long",
          day: "numeric",
          month: "long",
          year: "numeric",
        });
        heroDate.textContent = formattedDate;

        // Set venue info
        heroVenue.textContent =
          event.multipleVenues === "Yes" ? "Multiple Venues" : "Single Venue";

        // Update the event details section
        document.getElementById(
          "eventDetailsTitle"
        ).textContent = `About ${event.badge}`;
        document.getElementById("eventDetailsDescription").textContent =
          event.about || "No description available";

        // Clear existing cards
        const cardsContainer = document.getElementById("cardsContainer");
        cardsContainer.innerHTML = "";

        // Get the mapped fixtures for this event
        const mappedFixtures = event.mappedFixtures
          .map((fixtureId) => fixtures.find((f) => f.id === fixtureId))
          .filter((f) => f);

        // Create cards for each mapped fixture
        mappedFixtures.forEach((fixture) => {
          const card = document.createElement("div");
          card.className = "sporting-event__card";

          // Format fixture date
          const fixtureDate = new Date(fixture.date);
          const formattedFixtureDate = fixtureDate.toLocaleDateString("en-US", {
            month: "short",
            day: "numeric",
            year: "numeric",
          });

          card.innerHTML = `
      <div class="sporting-event__card" id="${fixture.id}">
                    <img src="${fixture.imageUrl}"
                         alt="${fixture.altText}"
                         class="sporting-event__card-image">
                    <div class="sporting-event__card-badge">${fixture.badgeText}</div>
                    <div class="sporting-event__card-content">
                        <h3 class="sporting-event__card-name">${fixture.title}</h3>
                        <p class="sporting-event__card-subtitle">${fixture.subtitle}</p>
                        <div class="sporting-event__card-info">
                            <p class="sporting-event__card-date">${fixture.date}</p>
                            <p class="sporting-event__card-distance">${fixture.distance}</p>
                        </div>
                    </div>
                </div>
    `;

          cardsContainer.appendChild(card);
        });

        // If no fixtures, show a message
        if (mappedFixtures.length === 0) {
          cardsContainer.innerHTML =
            "<p>No fixtures available for this event.</p>";
        }
      }

      // Show event details
      function showEventDetails(eventId) {
        const event = events.find((e) => e.id === eventId);
        if (!event) return;

        // Hide table and show details section
        document.querySelector(".table-container").style.display = "none";
        document.querySelector(".filter-section").style.display = "none";
        document.querySelector(".page-header").style.display = "none";

        // Create or show details container
        let detailsContainer = document.getElementById("eventDetailsContainer");
        if (!detailsContainer) {
          detailsContainer = document.createElement("div");
          detailsContainer.id = "eventDetailsContainer";
          detailsContainer.className = "event-details-container";
          document
            .querySelector(".content-wrapper")
            .appendChild(detailsContainer);
        } else {
          detailsContainer.style.display = "block";
        }

        // Format date and time separately
        const eventDate = new Date(new Date(event.startDate));
        const formattedDate = eventDate.toLocaleDateString("en-US", {
          year: "numeric",
          month: "long",
          day: "numeric",
        });
        const formattedTime = eventDate.toLocaleTimeString("en-US", {
          hour: "2-digit",
          minute: "2-digit",
        });

        // Get mapped fixtures with more details
        const mappedFixtures = event.mappedFixtures
          .map((fixtureId) => {
            const fixture = allFixtures.find((f) => f.id === fixtureId);
            return fixture
              ? {
                  name: fixture.name,
                  status: Math.random() > 0.5 ? "completed" : "upcoming", // Sample status
                  time: new Date(
                    Date.now() + Math.random() * 10 * 24 * 60 * 60 * 1000
                  ).toLocaleTimeString([], {
                    hour: "2-digit",
                    minute: "2-digit",
                  }),
                }
              : null;
          })
          .filter((f) => f);

        // Generate participants data (sample)
        const participants = [];
        for (let i = 1; i <= 8; i++) {
          participants.push({
            id: i,
            name: `Team ${i}`,
            logo: `https://via.placeholder.com/80?text=Team${i}`,
            wins: Math.floor(Math.random() * 10),
            losses: Math.floor(Math.random() * 5),
          });
        }

        // Render enhanced event details
        detailsContainer.innerHTML = `
               <div class="event-card-container-box">
                 <div class="event-card-container">
        <!-- Event Image -->
        <div class="event-image-container">
            <img src=${
              event.image ||
              "https://images.unsplash.com/photo-1540747913346-19e32dc3e97e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80"
            }
                 alt="Championship Event"
                 class="event-image"
                 id="eventImage">
            <span class="event-badge" id="eventBadge">${event.badge}</span>
             <div class="event-left-arrow"><i class="fa fa-arrow-left" aria-hidden="true"></i></div>
        </div>

        <div class="event-content">
            <!-- Event Name and Date -->
            <div class="event-header">
                <h1 class="event-title" id="eventName">${event.name}</h1>
                <div class="meta-item">
                    <i class="fas fa-calendar-day meta-icon"></i>
                    <span id="eventDate">${formattedDate}</span>
                </div>
            </div>

            <!-- About Event -->
            <p class="event-description" id="eventAbout">
               ${event.about}
            </p>

            <!-- Event Metadata -->
            <div class="event-meta">
                <div class="meta-item">
                    <i class="fas fa-map-marker-alt meta-icon"></i>
                    <span>Multiple Venues: <span class="yes-no-badge" id="multipleVenues">${
                      event.multipleVenues ? "Yes" : "No"
                    }</span></span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-list-ol meta-icon"></i>
                    <span>Fixtures: <strong id="fixturesCount">${
                      mappedFixtures.length
                    }</strong></span>
                </div>
            </div>
        </div>

    </div>
                </div>
            `;

        // Add event listener for back button
        detailsContainer
          .querySelector(".event-left-arrow")
          ?.addEventListener("click", function () {
            detailsContainer.style.display = "none";
            document.querySelector(".table-container").style.display = "block";
            document.querySelector(".filter-section").style.display = "block";
            document.querySelector(".page-header").style.display = "flex";
          });
      }

      // Setup event listeners
      function setupEventListeners() {
        menuToggle?.addEventListener("click", toggleSidebar);
        // Sidebar toggle
        navbarToggle?.addEventListener("click", function () {
          sidebar.classList.toggle("active");
        });

        // Apply filters
        applyFiltersBtn?.addEventListener("click", applyFilters);

        // Map events button
        mapEventsBtn?.addEventListener("click", function () {
          mappingSection.style.display = "block";
          renderEventsLists();
        });

        // Close mapping section
        closeMappingBtn?.addEventListener("click", function () {
          mappingSection.style.display = "none";
          selectedPendingEvents = [];
          selectedMappedEvents = [];
        });

        // Move events between lists
        moveRightBtn?.addEventListener("click", moveSelectedPendingToMapped);
        moveAllRightBtn?.addEventListener("click", moveAllPendingToMapped);
        moveLeftBtn?.addEventListener("click", revertSelectedMappedToPending);
        moveAllLeftBtn?.addEventListener("click", revertAllMappedToPending);

        // Add event button
        addEventBtn?.addEventListener("click", openAddEventModal);

        previewEventBtn?.addEventListener("click", openPreviewEventModal);
        previewModal?.addEventListener("click", closePreviewEventModal);
        showPreviewEventDetails?.addEventListener(
          "click",
          closePreviewEventDetailModal
        );
        appContainer?.addEventListener(
          "click",
          stopPropagationPreviewEventModal
        );

        // Close modal buttons
        closeModalBtn?.addEventListener("click", function () {
          eventModal.style.display = "none";
        });

        cancelModalBtn?.addEventListener("click", function () {
          eventModal.style.display = "none";
        });

        // Save event
        saveEventBtn?.addEventListener("click", function (e) {
          e.preventDefault();

          saveEvent();
        });

        // Move fixtures between lists
        moveFixtureRightBtn?.addEventListener(
          "click",
          moveSelectedFixturesToMapped
        );
        moveAllFixturesRightBtn?.addEventListener(
          "click",
          moveAllFixturesToMapped
        );
        moveFixtureLeftBtn?.addEventListener(
          "click",
          revertSelectedFixturesToUnmapped
        );
        moveAllFixturesLeftBtn?.addEventListener(
          "click",
          revertAllFixturesToUnmapped
        );
        // Add event listeners to form fields
        // document
        //   .getElementById("eventName")
        //   .addEventListener("input", checkFormValidity);
        // document
        //   .getElementById("startDate")
        //   .addEventListener("input", checkFormValidity);
        // document
        //   .getElementById("aboutEvent")
        //   .addEventListener("input", checkFormValidity);
        // Initialize the save button as disabled
        saveEventBtn.disabled = true;
        // Add these event listeners to your setupEventListeners function
        document
          .getElementById("confirmDeleteBtn")
          ?.addEventListener("click", deleteEvent);
        document
          .getElementById("cancelDeleteBtn")
          ?.addEventListener("click", function () {
            document.getElementById("deleteConfirmationModal").style.display =
              "none";
          });
        document
          .getElementById("closeDeleteModalBtn")
          ?.addEventListener("click", function () {
            document.getElementById("deleteConfirmationModal").style.display =
              "none";
          });
      }

      // Read more functionality
      // const readMoreBtn = document.querySelector(".sporting-event__read-more");
      // const description = document.querySelector(
      //   ".sporting-event__details-description"
      // );

      // if (readMoreBtn && description) {
      //   readMoreBtn.addEventListener("click", function (e) {
      //     e.preventDefault();

      //     if (description.style.webkitLineClamp) {
      //       description.style.webkitLineClamp = "unset";
      //       readMoreBtn.textContent = "Read less";
      //     } else {
      //       description.style.webkitLineClamp = "3";
      //       readMoreBtn.textContent = "Read more";
      //     }
      //   });
      // }

      // Function to create card HTML
      function createCard(card) {
        return `
                <div class="sporting-event__card" id="${card.id}">
                    <img src="${card.imageUrl}"
                         alt="${card.altText}"
                         class="sporting-event__card-image">
                    <div class="sporting-event__card-badge">${card.badgeText}</div>
                    <div class="sporting-event__card-content">
                        <h3 class="sporting-event__card-name">${card.title}</h3>
                        <p class="sporting-event__card-subtitle">${card.subtitle}</p>
                        <div class="sporting-event__card-info">
                            <p class="sporting-event__card-date">${card.date}</p>
                            <p class="sporting-event__card-distance">${card.distance}</p>
                        </div>
                    </div>
                </div>
            `;
      }
      function renderCards() {
        const container = document.getElementById("cardsContainer");
        container.innerHTML = fixtures.map((card) => createCard(card)).join("");
      }
      function updateFixtureButtonsState() {
        // Disable right buttons if no unmapped fixtures are selected or available
        moveFixtureRightBtn.disabled = selectedUnmappedFixtures.length === 0;
        moveAllFixturesRightBtn.disabled =
          document.querySelectorAll("#unmappedFixturesList .mapping-item")
            .length === 0;

        // Disable left buttons if no mapped fixtures are selected or available
        moveFixtureLeftBtn.disabled = selectedMappedFixtures.length === 0;
        moveAllFixturesLeftBtn.disabled =
          currentEventMappedFixtures.length === 0;
      }

      // Add this function to open the confirmation modal
      function openDeleteConfirmation(eventId) {
        eventToDelete = events.find((e) => e.id === eventId);
        if (!eventToDelete) return;

        // In a real app, you would fetch the actual user count from your API
        // const userCount = Math.floor(Math.random() * 100); // Simulated user count

        document.getElementById("eventNameToDelete").textContent =
          eventToDelete.name;
        // document.getElementById("userCount").textContent = userCount;
        document.getElementById("confirmDeleteInput").value = "";
        document.getElementById("confirmDeleteBtn").disabled = true;
        document.getElementById("deleteError").style.display = "none";
        document.getElementById("deleteConfirmationModal").style.display =
          "flex";

        // Focus the input field
        setTimeout(() => {
          document.getElementById("confirmDeleteInput").focus();
        }, 100);
      }

      // Add this function to handle the actual deletion
      function deleteEvent() {
        if (!eventToDelete) return;

        // Find and remove the event
        const index = events.findIndex((e) => e.id === eventToDelete.id);
        if (index !== -1) {
          events.splice(index, 1);
          renderEventsTable(events);
        }

        // Close the modal
        document.getElementById("deleteConfirmationModal").style.display =
          "none";
        eventToDelete = null;
      }

      // Add this event listener for the confirmation input
      document
        .getElementById("confirmDeleteInput")
        ?.addEventListener("input", function () {
          const inputValue = this.value.trim();
          const eventName = eventToDelete?.name || "";
          const deleteBtn = document.getElementById("confirmDeleteBtn");
          const errorMsg = document.getElementById("deleteError");

          if (inputValue === eventName) {
            deleteBtn.disabled = false;
            errorMsg.style.display = "none";
          } else {
            deleteBtn.disabled = true;
            if (inputValue.length > 0) {
              errorMsg.style.display = "block";
            } else {
              errorMsg.style.display = "none";
            }
          }
        });

      // Update your validateForm function
      // Update your validateForm function
      function validateForm() {
        const eventName = document.getElementById("eventName").value.trim();
        const badgeName = document.getElementById("badgeName").value.trim();
        const startDate = document.getElementById("startDate").value;
        const aboutEvent = document.getElementById("aboutEvent").value.trim();
        const eventImage = document.getElementById("eventImage").files[0];
        const hasFixtures = currentEventMappedFixtures.length > 0;

        // Validate individual fields
        const isEventNameValid = eventName !== "";
        const isBadgeNameValid = badgeName !== "";
        const isStartDateValid = startDate !== "";
        const isAboutEventValid = aboutEvent !== "";
        const isEventImageValid = eventImage !== undefined;
        const isFixturesValid = hasFixtures;

        // Show/hide error messages
        document.getElementById("eventNameError").style.display =
          isEventNameValid ? "none" : "block";
        document.getElementById("badgeNameError").style.display =
          isBadgeNameValid ? "none" : "block";
        document.getElementById("startDateError").style.display =
          isStartDateValid ? "none" : "block";
        document.getElementById("aboutEventError").style.display =
          isAboutEventValid ? "none" : "block";
        document.getElementById("eventImageError").style.display =
          isEventImageValid ? "none" : "block";
        document.getElementById("fixtureError").style.display = isFixturesValid
          ? "none"
          : "block";

        // Enable/disable save button
        const isValid =
          isEventNameValid &&
          isBadgeNameValid &&
          isStartDateValid &&
          isAboutEventValid &&
          isEventImageValid &&
          isFixturesValid;
        document.getElementById("saveEventBtn").disabled = !isValid;

        return isValid;
      }

      // Add image preview functionality
      document
        .getElementById("eventImage")
        ?.addEventListener("change", function (e) {
          const file = e.target.files[0];
          const preview = document.getElementById("previewImage");
          const previewContainer = document.getElementById("imagePreview");

          if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
              preview.src = e.target.result;
              previewContainer.style.display = "block";
            };
            reader.readAsDataURL(file);
          } else {
            previewContainer.style.display = "none";
          }

          validateForm();
        });

      // Add event listeners for form validation
      document
        .getElementById("eventName")
        ?.addEventListener("input", validateForm);
      document
        .getElementById("badgeName")
        ?.addEventListener("input", validateForm);
      document
        .getElementById("startDate")
        ?.addEventListener("input", validateForm);
      document
        .getElementById("aboutEvent")
        ?.addEventListener("input", validateForm);
      document
        .getElementById("eventImage")
        ?.addEventListener("change", validateForm);
      // Add event listeners for form validation
      document
        .getElementById("eventName")
        ?.addEventListener("input", validateForm);
      document
        .getElementById("startDate")
        ?.addEventListener("input", validateForm);
      document
        .getElementById("aboutEvent")
        ?.addEventListener("input", validateForm);

      // Initialize the page
      init();
    });
  </script>
</html>
